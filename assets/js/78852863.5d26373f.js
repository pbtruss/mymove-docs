"use strict";(self.webpackChunkmymove_docs=self.webpackChunkmymove_docs||[]).push([[4611],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>u});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=p(n),u=i,h=c["".concat(s,".").concat(u)]||c[u]||d[u]||r;return n?a.createElement(h,o(o({ref:t},m),{},{components:n})):a.createElement(h,o({ref:t},m))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},429:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(87462),i=(n(67294),n(3905));const r={title:"0067 Add a child table to mto_shipments for PPMs"},o="Add a child table to mto_shipments for PPMs",l={unversionedId:"adrs/ppm-db-design",id:"adrs/ppm-db-design",title:"0067 Add a child table to mto_shipments for PPMs",description:"User Story: MB-11140",source:"@site/docs/adrs/0067-ppm-db-design.md",sourceDirName:"adrs",slug:"/adrs/ppm-db-design",permalink:"/mymove-docs/docs/adrs/ppm-db-design",draft:!1,editUrl:"https://github.com/transcom/mymove-docs/edit/main/docs/adrs/0067-ppm-db-design.md",tags:[],version:"current",sidebarPosition:67,frontMatter:{title:"0067 Add a child table to mto_shipments for PPMs"},sidebar:"adrsSidebar",previous:{title:"0066 Use custom nullable types for patch requests",permalink:"/mymove-docs/docs/adrs/use-custom-nullable-types-for-patch-requests"},next:{title:"0068 Use fake data factories with fake data generators to create test data",permalink:"/mymove-docs/docs/adrs/use-fake-data-factories-with-fake-data-generators-to-create-test-data"}},s={},p=[{value:"Decision Drivers",id:"decision-drivers",level:2},{value:"Considered Alternatives",id:"considered-alternatives",level:2},{value:"Decision Outcome",id:"decision-outcome",level:2},{value:"Pros and Cons of the Alternatives",id:"pros-and-cons-of-the-alternatives",level:2},{value:"Use old table",id:"use-old-table",level:3},{value:"Modify <code>mto_shipments</code>",id:"modify-mto_shipments",level:3},{value:"Create a new table\xb9",id:"create-a-new-table",level:3},{value:"References",id:"references",level:2}],m={toc:p};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"add-a-child-table-to-mto_shipments-for-ppms"},"Add a child table to mto_shipments for PPMs"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"User Story:")," ",(0,i.kt)("a",{parentName:"p",href:"https://dp3.atlassian.net/browse/MB-11140"},"MB-11140")),(0,i.kt)("p",null,"Currently, there is a ",(0,i.kt)("inlineCode",{parentName:"p"},"personally_procurred_moves")," table that is used for PPMs while there is a separate ",(0,i.kt)("inlineCode",{parentName:"p"},"mto_shipments")," table that is used for HHG and other shipments types. Since the existing table doesn't follow the current conventions and we are working on this outcome it is a good time to revisit the DB structure to see if the original design continues to be the best choice moving forward."),(0,i.kt)("h2",{id:"decision-drivers"},"Decision Drivers"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Time and complexity",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Do we have bandwidth to make these changes?"),(0,i.kt)("li",{parentName:"ul"},"Do we have enough capacity handle the unknowns or deal with future issues this decision may cause?"),(0,i.kt)("li",{parentName:"ul"},"Do we need more information?",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Do we have enough future capacity to delay this?"))))),(0,i.kt)("li",{parentName:"ul"},"Flexibility",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"How likely is this solution to support new shipment types or even existing shipments?"))),(0,i.kt)("li",{parentName:"ul"},"Consistency",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"How consistent are our design patterns?",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Are they intuitive?")))))),(0,i.kt)("h2",{id:"considered-alternatives"},"Considered Alternatives"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#use-old-table"},"Use old table")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#modify-mto_shipments"},"Modify ",(0,i.kt)("inlineCode",{parentName:"a"},"mto_shipments"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#create-a-new-table"},"Create a new table"))),(0,i.kt)("h2",{id:"decision-outcome"},"Decision Outcome"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Chosen Alternative: ",(0,i.kt)("a",{parentName:"li",href:"#create-a-new-table"},"Create a new table")),(0,i.kt)("li",{parentName:"ul"},"Positive Outcomes: We will have a pattern that is easier to understand and will potentially be helpful in the future when implementing new shipments. The tentative plan is to test this new pattern out with PPMs, and if things go smoothly, revisit this to be the default DB pattern for all new shipment types moving forward."),(0,i.kt)("li",{parentName:"ul"},"Consequences: If this new pattern is not utilized elsewhere we may be adding more complexity by introducing another pattern that is only partially used.")),(0,i.kt)("h2",{id:"pros-and-cons-of-the-alternatives"},"Pros and Cons of the Alternatives"),(0,i.kt)("h3",{id:"use-old-table"},"Use old table"),(0,i.kt)("p",null,"Continue using the ",(0,i.kt)("inlineCode",{parentName:"p"},"personally_procurred_moves")," table"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"+")," Less work, most of the plumbing is already set up and can be leveraged to account for modifications made."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," Additional work would be needed to support the office workflows and to update the code to current standards."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," The PPM code will remain siloed"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," The nomenclature is not clear. We currently have moves which contain PPMs which can cause some confusions, as we normally consider the relationship to be moves contain shipments."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," The PPM models and relationship will be unique so there will be additional overhead to learn this relationship when switching to PPMs from another area of the project")),(0,i.kt)("h3",{id:"modify-mto_shipments"},"Modify ",(0,i.kt)("inlineCode",{parentName:"h3"},"mto_shipments")),(0,i.kt)("p",null,"Incorporate the columns on the ",(0,i.kt)("inlineCode",{parentName:"p"},"personally_procurred_moves")," table into the ",(0,i.kt)("inlineCode",{parentName:"p"},"mto_shipments")," table"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"+")," This will make PPMs consistent with how we store and retrieve other shipment types"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"+")," A ",(0,i.kt)("inlineCode",{parentName:"li"},"CHECK")," constraint can be used to ensure only PPM related fields are used with a PPM shipment type"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," The ",(0,i.kt)("inlineCode",{parentName:"li"},"mto_shipments")," table has a growing number of fields and it\u2019s hard to know which fields are applicable for a given shipment type"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," As we continue to support more types of shipments, this is beginning to feel like a workaround solution rather than the best solution"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," This is a sizable amount of work, and there is some risk of the amount of work ballooning into more work that originally expecting.")),(0,i.kt)("h3",{id:"create-a-new-table"},"Create a new table",(0,i.kt)("a",{parentName:"h3",href:"#references"},"\xb9")),(0,i.kt)("p",null,"Create a new table that is a child of the ",(0,i.kt)("inlineCode",{parentName:"p"},"mto_shipments")," table that holds ppm specific info"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"++")," This structure is more flexible and can be implemented retroactively for old shipment types and support new shipment types"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"+")," This is semantically the most clear and intuitive"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," If the existing patterns for shipments are not modified, we will continue to have multiple patterns for different types of shipments"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," The most amount of work and the most unknowns (slightly more than ",(0,i.kt)("a",{parentName:"li",href:"#modify-mto_shipments"},"modifying mto_shipments"),")")),(0,i.kt)("h2",{id:"references"},"References"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#create-a-new-table"},"^")," ",(0,i.kt)("a",{parentName:"li",href:"https://martinfowler.com/eaaCatalog/classTableInheritance.html"},"Class table inheritance")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://ustcdp3.slack.com/archives/CP6PTUPQF/p1641937842037600"},"Slack thread about this conversation")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://dp3.atlassian.net/wiki/spaces/MT/pages/1605238794/PPM+Bookings+Technical+Discovery#Database"},"Backend Discovery"))))}d.isMDXComponent=!0}}]);