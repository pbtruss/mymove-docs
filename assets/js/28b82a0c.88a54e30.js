"use strict";(self.webpackChunkmymove_docs=self.webpackChunkmymove_docs||[]).push([[8637],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=l(n),m=r,g=u["".concat(c,".").concat(m)]||u[m]||p[m]||i;return n?a.createElement(g,o(o({ref:t},d),{},{components:n})):a.createElement(g,o({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},85782:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var a=n(87462),r=(n(67294),n(3905));const i={sidebar_position:2},o="Getting Started",s={unversionedId:"backend/guides/service-objects/getting-started",id:"backend/guides/service-objects/getting-started",title:"Getting Started",description:"These docs will go through the process of creating a new set of service objects, but the info in each section should",source:"@site/docs/backend/guides/service-objects/getting-started.md",sourceDirName:"backend/guides/service-objects",slug:"/backend/guides/service-objects/getting-started",permalink:"/mymove-docs/docs/backend/guides/service-objects/getting-started",draft:!1,editUrl:"https://github.com/transcom/mymove-docs/edit/main/docs/backend/guides/service-objects/getting-started.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"backendSidebar",previous:{title:"Overview",permalink:"/mymove-docs/docs/backend/guides/service-objects/overview"},next:{title:"Structure",permalink:"/mymove-docs/docs/backend/guides/service-objects/structure"}},c={},l=[{value:"Fictional Models",id:"fictional-models",level:2},{value:"Creating Service Objects",id:"creating-service-objects",level:2}],d={toc:l};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"getting-started"},"Getting Started"),(0,r.kt)("p",null,"These docs will go through the process of creating a new set of service objects, but the info in each section should\nbe applicable whether you're creating a new service object or editing an existing one. "),(0,r.kt)("p",null,"The docs will be using fictional models and associated service objects to make it less likely that there will be\ndrift between what you see here and what is in the ",(0,r.kt)("inlineCode",{parentName:"p"},"mymove")," codebase (since none of the code here will actually be\nin the codebase)."),(0,r.kt)("h2",{id:"fictional-models"},"Fictional Models"),(0,r.kt)("p",null,"For reference, here are the fictional models we'll be working with. They come from our\n",(0,r.kt)("a",{parentName:"p",href:"/docs/backend/setup/database-migrations"},"docs on db migrations")," so if you'd like to follow along, you can get the\ncorresponding migrations from those docs."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="pkg/models/pet.go"',title:'"pkg/models/pet.go"'},'package models\n\nimport (\n    "time"\n\n    "github.com/gofrs/uuid"\n\n    "github.com/transcom/mymove/pkg/unit"\n)\n\ntype PetType string\n\nconst (\n    // PetTypeCat captures the enum value "CAT"\n    PetTypeCat PetType = "CAT"\n    // PetTypeDog captures the enum value "DOG"\n    PetTypeDog PetType = "DOG"\n    // PetTypeFish captures the enum value "FISH"\n    PetTypeFish PetType = "FISH"\n    // PetTypeGuineaPig captures the enum value "GUINEA_PIG"\n    PetTypeGuineaPig PetType = "GUINEA_PIG"\n    // PetTypeHamster captures the enum value "HAMSTER"\n    PetTypeHamster PetType = "HAMSTER"\n    // PetTypeOther captures the enum value "OTHER"\n    PetTypeOther PetType = "OTHER"\n    // PetTypeRat captures the enum value "RAT"\n    PetTypeRat PetType = "RAT"\n    // PetTypeSnake captures the enum value "SNAKE"\n    PetTypeSnake PetType = "SNAKE"\n    // PetTypeTurtle captures the enum value "TURTLE"\n    PetTypeTurtle PetType = "TURTLE"\n)\n\n// Pet contains all the information relevant to a pet...\ntype Pet struct {\n    ID        uuid.UUID   `json:"id" db:"id"`\n    CreatedAt time.Time   `json:"created_at" db:"created_at"`\n    UpdatedAt time.Time   `json:"updated_at" db:"updated_at"`\n    Type      PetType     `json:"type" db:"type"`\n    Name      string      `json:"name" db:"name"`\n    Birthday  *time.Time  `json:"birthday" db:"birthday"`\n    GotchaDay *time.Time  `json:"gotcha_day" db:"gotcha_day"`\n    Bio       *string     `json:"bio" db:"bio"`\n    Weight    *unit.Pound `json:"weight" db:"weight"`\n    Cat       *Cat        `has_one:"cats" fk_id:"pet_id"`\n}\n\n// Pets is a list of Pets\ntype Pets []Pet\n')),(0,r.kt)("p",null,"and "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="pkg/models/cat.go"',title:'"pkg/models/cat.go"'},'package models\n\nimport (\n    "time"\n\n    "github.com/gofrs/uuid"\n)\n\n// Cat contains all the information relevant to a cat...\ntype Cat struct {\n    ID                       uuid.UUID `json:"id" db:"id"`\n    PetID                    uuid.UUID `json:"pet_id" db:"pet_id"`\n    Pet                      Pet       `belongs_to:"pets" fk_id:"pet_id"`\n    CreatedAt                time.Time `json:"created_at" db:"created_at"`\n    UpdatedAt                time.Time `json:"updated_at" db:"updated_at"`\n    LikesCatnip              *bool     `json:"likes_catnip" db:"likes_catnip"`\n    FavoriteCatnipBrand      *string   `json:"favorite_catnip_brand" db:"favorite_catnip_brand"`\n    FavoriteCatScratcherType *string   `json:"favorite_cat_scratcher_type" db:"favorite_cat_scratcher_type"`\n}\n\n// Cats is a list of Cats\ntype Cats []Cat\n')),(0,r.kt)("h2",{id:"creating-service-objects"},"Creating Service Objects"),(0,r.kt)("p",null,"Now that we have our model, we can start creating our new service objects."),(0,r.kt)("p",null,"We'll be creating a service object to create pets, and one to update pets. Once we start thinking about our ",(0,r.kt)("inlineCode",{parentName:"p"},"Cat"),"\nmodel though, we'll find the need to introduce a set of orchestrator service objects. This is because when we create\na ",(0,r.kt)("inlineCode",{parentName:"p"},"Cat"),", we'll want a corresponding ",(0,r.kt)("inlineCode",{parentName:"p"},"Pet")," to be created first and when we update a ",(0,r.kt)("inlineCode",{parentName:"p"},"Cat"),", there may be changes to\nthe ",(0,r.kt)("inlineCode",{parentName:"p"},"Pet")," too. The orchestrators will serve to make sure things are called when needed and in the right order."),(0,r.kt)("p",null,"We'll go through the following:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"structure"},"Learn about service object file structure")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"set-up-service-subpackage-and-interface"},"Set up service subpackage and interface")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"validation"},"Set up validation pattern")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"implementation"},"Implement the service objects")," "),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"usage"},"Using service objects"))))}p.isMDXComponent=!0}}]);