"use strict";(self.webpackChunkmymove_docs=self.webpackChunkmymove_docs||[]).push([[9876],{67389:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>m,frontMatter:()=>n,metadata:()=>c,toc:()=>r});var d=o(87462),i=(o(67294),o(3905));o(95657);const n={},a="DTOD Architecture",c={unversionedId:"backend/guides/dtod/dtod-architecture",id:"backend/guides/dtod/dtod-architecture",title:"DTOD Architecture",description:"This document aims to give a general picture of what DTOD looks like in our code.",source:"@site/docs/backend/guides/dtod/dtod-architecture.md",sourceDirName:"backend/guides/dtod",slug:"/backend/guides/dtod/dtod-architecture",permalink:"/mymove-docs/docs/backend/guides/dtod/dtod-architecture",draft:!1,editUrl:"https://github.com/transcom/mymove-docs/edit/main/docs/backend/guides/dtod/dtod-architecture.md",tags:[],version:"current",frontMatter:{},sidebar:"backendSidebar",previous:{title:"DTOD",permalink:"/mymove-docs/docs/backend/guides/dtod"},next:{title:"Testing DTOD",permalink:"/mymove-docs/docs/backend/guides/dtod/testing-dtod"}},s={},r=[{value:"Mocked DTOD",id:"mocked-dtod",level:2},{value:"Non Mocked DTOD",id:"non-mocked-dtod",level:2}],l={toc:r};function m(e){let{components:t,...o}=e;return(0,i.kt)("wrapper",(0,d.Z)({},l,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"dtod-architecture"},"DTOD Architecture"),(0,i.kt)("p",null,"This document aims to give a general picture of what DTOD looks like in our code."),(0,i.kt)("p",null,"DTOD is a third party API that the MilMove system calls to get the distance calculation between two Zip codes."),(0,i.kt)("p",null,"The calls to set up DTOD occur in ",(0,i.kt)("inlineCode",{parentName:"p"},"cmd/milmove/serve.go"),".\n",(0,i.kt)("inlineCode",{parentName:"p"},"pkg/cli/route.go")," holds the code to initialize the the API username, password, and URL to use. The API username, password, and URL are held inside of the AWS Systems Manager Parameter store. The flags get passed by ",(0,i.kt)("inlineCode",{parentName:"p"},"cmd/milmove/serve.go")," when it calls ",(0,i.kt)("inlineCode",{parentName:"p"},"InitDTODRoutePlanner")," inside of ",(0,i.kt)("inlineCode",{parentName:"p"},"pkg/route/planner.go"),"."),(0,i.kt)("p",null,"From here, either the API or the mock is called."),(0,i.kt)("h2",{id:"mocked-dtod"},"Mocked DTOD"),(0,i.kt)("p",null,"If DTOD is mocked, then ",(0,i.kt)("inlineCode",{parentName:"p"},"cmd/milmove/serve.go")," calls the ",(0,i.kt)("inlineCode",{parentName:"p"},"NewMockDTODZip5Distance")," inside of ",(0,i.kt)("inlineCode",{parentName:"p"},"pkg/route/dtod_zip5_distance_mock.go"),".\nThe ",(0,i.kt)("inlineCode",{parentName:"p"},"mockDTODZip5Distance")," has the receiver ",(0,i.kt)("inlineCode",{parentName:"p"},"DTODZip5Distance"),". This function does the work of creating fake data to use."),(0,i.kt)("h2",{id:"non-mocked-dtod"},"Non Mocked DTOD"),(0,i.kt)("p",null,"If DTOD is not mocked, then ",(0,i.kt)("inlineCode",{parentName:"p"},"cmd/milmove/serve.go")," does additional work to setup ",(0,i.kt)("inlineCode",{parentName:"p"},"pkg/route/dtod_zip5_distance.go"),".\n",(0,i.kt)("inlineCode",{parentName:"p"},"pkg/route/dtod_zip5_distance.go")," makes calls to the DTOD API."))}m.isMDXComponent=!0}}]);