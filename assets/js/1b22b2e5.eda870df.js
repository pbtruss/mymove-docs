"use strict";(self.webpackChunkmymove_docs=self.webpackChunkmymove_docs||[]).push([[8245],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>d});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=u(n),d=r,h=c["".concat(s,".").concat(d)]||c[d]||p[d]||i;return n?a.createElement(h,o(o({ref:t},m),{},{components:n})):a.createElement(h,o({ref:t},m))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},6614:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var a=n(87462),r=(n(67294),n(3905));const i={title:"0020 Using Swagger to manage server route authentication",description:"Stick with what we have"},o="Using Swagger to manage server route authentication",l={unversionedId:"adrs/swagger-auth",id:"adrs/swagger-auth",title:"0020 Using Swagger to manage server route authentication",description:"Stick with what we have",source:"@site/docs/adrs/0020-swagger-auth.md",sourceDirName:"adrs",slug:"/adrs/swagger-auth",permalink:"/mymove-docs/docs/adrs/swagger-auth",draft:!1,editUrl:"https://github.com/transcom/mymove-docs/edit/main/docs/adrs/0020-swagger-auth.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{title:"0020 Using Swagger to manage server route authentication",description:"Stick with what we have"},sidebar:"adrsSidebar",previous:{title:"0019 Range Slider React Component",permalink:"/mymove-docs/docs/adrs/client-rangeslider"},next:{title:"0021 Temporary use and plan for expunging Social Security Numbers in the prototype",permalink:"/mymove-docs/docs/adrs/ssn-use"}},s={},u=[{value:"Considered Alternatives",id:"considered-alternatives",level:2},{value:"Decision Outcome",id:"decision-outcome",level:2},{value:"Pros and Cons of the Alternatives  optional ",id:"pros-and-cons-of-the-alternatives--optional-",level:2},{value:"<em>Stick with what we have</em>",id:"stick-with-what-we-have",level:3},{value:"<em>Implement one of the security methods as defined in OpenAPI 2.0</em>",id:"implement-one-of-the-security-methods-as-defined-in-openapi-20",level:3},{value:"<em>Upgrade to OpenAPI 3.0</em>",id:"upgrade-to-openapi-30",level:3}],m={toc:u};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"using-swagger-to-manage-server-route-authentication"},"Using Swagger to manage server route authentication"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"User Story:")," ",(0,r.kt)("a",{parentName:"p",href:"https://www.pivotaltracker.com/story/show/155131958"},"155131958")),(0,r.kt)("p",null,"Swagger and OpenAPI allow for defining route security and authentication through the same YAML file we use to define the rest of our API. Doing so would enhance Swagger's usage benefit of having information about our API be in a single centralized place, and would also allow us to possibly rely on tooling to generate some amount of authentication-related code for us."),(0,r.kt)("h2",{id:"considered-alternatives"},"Considered Alternatives"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Stick with what we have")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Implement one of the security methods as defined in OpenAPI 2.0")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Upgrade to OpenAPI 3.0"))),(0,r.kt)("h2",{id:"decision-outcome"},"Decision Outcome"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Chosen Alternative: ",(0,r.kt)("em",{parentName:"li"},"Stick with what we have")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"After doing some research, trying to implement route security through OpenAPI version 2 or 3 came with too many consequences and the benefits weren't valuable enough to be worth it. OpenAPI 2.0 only supports a few authentication schemes: basic (user/pass), API key, and OAuth 2.0. OpenAPI 3.0 supports bearer auth and cookie auth, but is unsupported by go-swagger."))),(0,r.kt)("h2",{id:"pros-and-cons-of-the-alternatives--optional-"},"Pros and Cons of the Alternatives "),(0,r.kt)("h3",{id:"stick-with-what-we-have"},(0,r.kt)("em",{parentName:"h3"},"Stick with what we have")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"+")," ",(0,r.kt)("em",{parentName:"li"},"Doesn't require shoehorning into some other auth model")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"+")," ",(0,r.kt)("em",{parentName:"li"},"Still lets us control route security, just not as defined in Swagger YAML files")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-")," ",(0,r.kt)("em",{parentName:"li"},"Route security isn't centralized with other API descriptors")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-")," ",(0,r.kt)("em",{parentName:"li"},"Need to do all auth middleware manually"))),(0,r.kt)("h3",{id:"implement-one-of-the-security-methods-as-defined-in-openapi-20"},(0,r.kt)("em",{parentName:"h3"},"Implement one of the security methods as defined in OpenAPI 2.0")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"+")," ",(0,r.kt)("em",{parentName:"li"},"Get to define route security in our Swagger YAML file")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"+")," ",(0,r.kt)("em",{parentName:"li"},"Some amount of auth checking is taken care of by go-swagger")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-")," ",(0,r.kt)("em",{parentName:"li"},"Doesn't directly support our current JWT auth system, would have to jury rig around ",(0,r.kt)("inlineCode",{parentName:"em"},"apiKey"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-")," ",(0,r.kt)("em",{parentName:"li"},"Much of the code around token creation/renewal would still be manual"))),(0,r.kt)("h3",{id:"upgrade-to-openapi-30"},(0,r.kt)("em",{parentName:"h3"},"Upgrade to OpenAPI 3.0")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"+")," ",(0,r.kt)("em",{parentName:"li"},"Can define security in swagger without any fundamental changes to our current system")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"------")," ",(0,r.kt)("em",{parentName:"li"},"go-swagger, a library we rely on heavily, would be unusable"))))}p.isMDXComponent=!0}}]);