"use strict";(self.webpackChunkmymove_docs=self.webpackChunkmymove_docs||[]).push([[4318],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>h});var i=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=i.createContext({}),c=function(e){var t=i.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},d=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(a),h=n,m=u["".concat(l,".").concat(h)]||u[h]||p[h]||o;return a?i.createElement(m,r(r({ref:t},d),{},{components:a})):i.createElement(m,r({ref:t},d))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,r=new Array(o);r[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,r[1]=s;for(var c=2;c<o;c++)r[c]=a[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,a)}u.displayName="MDXCreateElement"},40737:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var i=a(87462),n=(a(67294),a(3905));const o={sidebar_position:8},r="Guide to Static Analysis Security Workflow",s={unversionedId:"backend/guides/guide-to-static-analysis-security-workflow",id:"backend/guides/guide-to-static-analysis-security-workflow",title:"Guide to Static Analysis Security Workflow",description:"Contents",source:"@site/docs/backend/guides/guide-to-static-analysis-security-workflow.md",sourceDirName:"backend/guides",slug:"/backend/guides/guide-to-static-analysis-security-workflow",permalink:"/mymove-docs/docs/backend/guides/guide-to-static-analysis-security-workflow",draft:!1,editUrl:"https://github.com/transcom/mymove-docs/edit/main/docs/backend/guides/guide-to-static-analysis-security-workflow.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"backendSidebar",previous:{title:"Guide to Static Analysis Annotations for Disabled Linters",permalink:"/mymove-docs/docs/backend/guides/guide-to-static-analysis-annotations-for-disabled-linters"},next:{title:"How to Access a Global Application Variable",permalink:"/mymove-docs/docs/backend/guides/access-global-variables"}},l={},c=[{value:"Exceptions",id:"exceptions",level:2},{value:"What to do if you\u2019ve written code that triggers the linter",id:"what-to-do-if-youve-written-code-that-triggers-the-linter",level:2},{value:"If you need to disable a rule, check the severity level of the linter violation",id:"if-you-need-to-disable-a-rule-check-the-severity-level-of-the-linter-violation",level:2},{value:"If severity level of a linter occurrence is unknown (i.e. it\u2019s not in master spreadsheet)",id:"if-severity-level-of-a-linter-occurrence-is-unknown-ie-its-not-in-master-spreadsheet",level:2},{value:"If you need to write an annotation",id:"if-you-need-to-write-an-annotation",level:2},{value:"If you need annotation approval",id:"if-you-need-annotation-approval",level:2},{value:"If you are a Trussel in \u2018truss-IS3\u2019 Github group and someone needs an approval",id:"if-you-are-a-trussel-in-truss-is3-github-group-and-someone-needs-an-approval",level:2}],d={toc:c};function p(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,i.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"guide-to-static-analysis-security-workflow"},"Guide to Static Analysis Security Workflow"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Contents")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#guide-to-static-analysis-security-workflow"},"Guide to Static Analysis Security Workflow")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#introduction"},"Introduction"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#exceptions"},"Exceptions")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#processes"},"Processes"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#what-to-do-if-youve-written-code-that-triggers-the-linter"},"What to do if you\u2019ve written code that triggers the linter")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#if-you-need-to-disable-a-rule-check-the-severity-level-of-the-linter-violation"},"If you need to disable a rule, check the severity level of the linter violation")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#if-severity-level-of-a-linter-occurrence-is-unknown-ie-its-not-in-master-spreadsheet"},"If severity level of a linter occurrence is unknown (i.e. it\u2019s not in master spreadsheet)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#if-you-need-to-write-an-annotation"},"If you need to write an annotation")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#if-you-need-annotation-approval"},"If you need annotation approval")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#if-you-are-a-trussel-in-truss-is3-github-group-and-someone-needs-an-approval"},"If you are a Trussel in \u2018truss-IS3\u2019 Github group and someone needs an approval"))))),(0,n.kt)("h1",{id:"introduction"},"Introduction"),(0,n.kt)("p",null,"As part of the ATO (Authority to Operate) process (",(0,n.kt)("a",{parentName:"p",href:"https://ustcdp3.slack.com/archives/CP4UNF7H6"},"#wg-ato"),") the mymove repository must complete a static analysis assessment of the codebase periodically to identify potential vulnerabilities. Historically, this has been accomplished with the Fortify static analysis tool. However, the Fortify static analysis tool may not be compatible with the latest Go versions."),(0,n.kt)("p",null,"In lieu of using Fortify, we are attempting to complete the same analysis with the existing mix of ",(0,n.kt)("a",{parentName:"p",href:"https://golangci-lint.run/"},"golangci-lint"),", ",(0,n.kt)("a",{parentName:"p",href:"https://pre-commit.com/"},"pre-commit hooks"),", and ",(0,n.kt)("a",{parentName:"p",href:"https://eslint.org/"},"eslint"),". The severity of vulnerabilities are categorized along a scale from CAT-I, being the most critical, to CAT-III which is of lowest priority."),(0,n.kt)("p",null,"In order to meet security and ATO requirements, we must ensure linters are alerting engineers to fix any issues. Disabling certain rules could risk merging of code that creates a security vulnerability. Some in-file rule disables may be mitigated through justifiable reasoning and annotation comments within the code."),(0,n.kt)("h2",{id:"exceptions"},"Exceptions"),(0,n.kt)("p",null,"Some eslint rules have been determined to be okay to bypass:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Rules in the ",(0,n.kt)("a",{parentName:"li",href:"https://docs.google.com/spreadsheets/d/1eH5ZYkKv7_c-p_D_y5G5ULdWgI_Zrwg_xL4WbLNZoqw/edit#gid=0"},"master spreadsheet")," under Fortify Weakness as \u2018N/A\u2019 (highlighted in gray)"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"'security/detect-object-injection'")," is okay in src code (for example, we do not want to disable it in the dangerjs file). It is disabled inside the ",(0,n.kt)("inlineCode",{parentName:"li"},"src")," directory.")),(0,n.kt)("p",null,"The ",(0,n.kt)("code",null,(0,n.kt)("a",{parentName:"p",href:"https://github.com/transcom/mymove/blob/master/eslint-plugin-ato/no-unapproved-annotation.js"},"eslint-plugin-ato/no-unapproved-annotation.js"))," file is where rules are bypassed by the linter."),(0,n.kt)("h1",{id:"processes"},"Processes"),(0,n.kt)("h2",{id:"what-to-do-if-youve-written-code-that-triggers-the-linter"},"What to do if you\u2019ve written code that triggers the linter"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"First choice:")," Fix the linter issue/remove the disable and write the code such that disabling of the linter is unnecessary."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Second choice:")," If disabling is necessary, check the severity level, disable the code, add annotations above the disable line if CAT I, II or III."),(0,n.kt)("p",null,"Acceptance flow diagram:\n",(0,n.kt)("img",{alt:"Acceptance flow diagram",src:a(40192).Z,width:"1180",height:"567"}),"\n",(0,n.kt)("a",{parentName:"p",href:"https://lucid.app/documents/view/511a8852-7a08-4589-b536-52c5b11bbfdc"},"https://lucid.app/documents/view/511a8852-7a08-4589-b536-52c5b11bbfdc")),(0,n.kt)("h2",{id:"if-you-need-to-disable-a-rule-check-the-severity-level-of-the-linter-violation"},"If you need to disable a rule, check the severity level of the linter violation"),(0,n.kt)("p",null,"Check the severity level of the ",(0,n.kt)("a",{parentName:"p",href:"https://docs.google.com/spreadsheets/d/1eH5ZYkKv7_c-p_D_y5G5ULdWgI_Zrwg_xL4WbLNZoqw/edit#gid=0"},"master spreadsheet"),". If it is CAT I, II, or III, you will need to write annotation"),(0,n.kt)("h2",{id:"if-severity-level-of-a-linter-occurrence-is-unknown-ie-its-not-in-master-spreadsheet"},"If severity level of a linter occurrence is unknown (i.e. it\u2019s not in ",(0,n.kt)("a",{parentName:"h2",href:"https://docs.google.com/spreadsheets/d/1eH5ZYkKv7_c-p_D_y5G5ULdWgI_Zrwg_xL4WbLNZoqw/edit#gid=0"},"master spreadsheet"),")"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Contact Leo Scott and Erik Reiken, the ISSOs (Information System Security Officer), in #static-code-review and request a review of the linter rule. One of them will add it into the spreadsheet.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Depending on the severity level of the eslint, there are two routes:"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"If the finding is an eslint with N/A severity"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Add it to the ",(0,n.kt)("inlineCode",{parentName:"li"},"approvedBypassableRules")," list in the ",(0,n.kt)("code",null,(0,n.kt)("a",{parentName:"li",href:"https://github.com/transcom/mymove/blob/master/eslint-plugin-ato/no-unapproved-annotation.js"},"eslint-plugin-ato/no-unapproved-annotation.js")," "),"file"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"If the finding is of severity level CAT I, II, or III"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"First choice is for it to be remediated (refactor code so that the rule does not need to be violated)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Second choice is for it to be annotated"))))))),(0,n.kt)("h2",{id:"if-you-need-to-write-an-annotation"},"If you need to write an annotation"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"see ",(0,n.kt)("a",{parentName:"p",href:"/mymove-docs/docs/backend/guides/guide-to-static-analysis-annotations-for-disabled-linters"},"Guide to Static Analysis Annotations for Disabled Linters"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Make sure all disabling code appears immediately below the annotation, or else the linter will give you an error."))),(0,n.kt)("h2",{id:"if-you-need-annotation-approval"},"If you need annotation approval"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Label the PR with needs-is3-review"),(0,n.kt)("li",{parentName:"ol"},"Add \u2018truss-is3\u2019 group as reviewers. You can alert Trussels in #eng-leads"),(0,n.kt)("li",{parentName:"ol"},"Tag ISSOs (Leo Scott and Erik Reiken) in the #static-code-review Slack channel"),(0,n.kt)("li",{parentName:"ol"},"Provide as much info/context as you can for the ISSOs in the slack message:",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"Include links in PR Description"),(0,n.kt)("li",{parentName:"ol"},"Give further context"),(0,n.kt)("li",{parentName:"ol"},"Let them know if the story is a block to other stories")))),(0,n.kt)("p",null,"Note: The PR will fail the run linters check until the ISSM approves the change in status via a commit to the PR."),(0,n.kt)("h2",{id:"if-you-are-a-trussel-in-truss-is3-github-group-and-someone-needs-an-approval"},"If you are a Trussel in \u2018truss-IS3\u2019 Github group and someone needs an approval"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Ensure one IS3 Trussel reviews and approves PRs with annotations"),(0,n.kt)("li",{parentName:"ol"},"Review any changes to config files that impact static analysis linting rules (you are a CODEOWNER for those files)")),(0,n.kt)("p",null,"Workflow Diagram:\n",(0,n.kt)("img",{alt:"Workflow diagram",src:a(37201).Z,width:"3082",height:"2038"}),"\n",(0,n.kt)("a",{parentName:"p",href:"https://lucid.app/documents/view/17d640a9-ae3d-4b3b-bbd6-a9a999be013c"},"https://lucid.app/documents/view/17d640a9-ae3d-4b3b-bbd6-a9a999be013c")))}p.isMDXComponent=!0},40192:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/approval_flow-207f921b9c1cd0cc908fb34ff4ce7048.png"},37201:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/static_analysis_security_workflow-30162a639beb2d152a460200bf96ad79.png"}}]);