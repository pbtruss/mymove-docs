<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">Understanding testdatagen functions | MilMove Developer Portal</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://transcom.github.io/mymove-docs/docs/backend/testing/understanding-testdatagen-functions"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Understanding testdatagen functions | MilMove Developer Portal"><meta data-react-helmet="true" name="description" content="Why we use testdatagen functions"><meta data-react-helmet="true" property="og:description" content="Why we use testdatagen functions"><link data-react-helmet="true" rel="shortcut icon" href="/mymove-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://transcom.github.io/mymove-docs/docs/backend/testing/understanding-testdatagen-functions"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/backend/testing/understanding-testdatagen-functions" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/backend/testing/understanding-testdatagen-functions" hreflang="x-default"><link rel="stylesheet" href="/mymove-docs/assets/css/styles.03455fb1.css">
<link rel="preload" href="/mymove-docs/assets/js/runtime~main.5c2be16a.js" as="script">
<link rel="preload" href="/mymove-docs/assets/js/main.914b6b55.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mymove-docs/"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">MilMove Documentation</b></a><a class="navbar__item navbar__link" href="/mymove-docs/docs/about/">About</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/frontend">Frontend</a><a class="navbar__item navbar__link navbar__link--active" href="/mymove-docs/docs/backend">Backend</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/api">API</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/tools">Tools</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/">Docs</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/help/index">Help</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>mymove<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/mymove-docs/docs/backend">MilMove Backend</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Testing</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/acceptance-testing-syncada-edi-invoicing">Acceptance testing Syncada</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/acceptance-testing-notifications">Acceptance testing notifications</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/acceptance-testing-payment-requests">Acceptance testing payment requests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/run-acceptance-tests">How to run acceptance tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/run-e2e-tests">How to run end to end (Cypress) tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/run-go-tests">How to run Go tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/how-to-write-fast-tests">How to write fast tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/interacting-with-the-db-in-go-server-tests">Interacting with the database in Go server tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/running-server-tests-inside-a-transaction">Running server tests inside a transaction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/test-data-generation">Test data generation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/testing-best-practices">Testing best practices</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/testing-payment-requests-for-domestic-sit-service-items">Testing payment requests</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mymove-docs/docs/backend/testing/understanding-testdatagen-functions">Understanding testdatagen functions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Setup</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Understanding testdatagen functions</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="why-we-use-testdatagen-functions"></a>Why we use testdatagen functions<a class="hash-link" href="#why-we-use-testdatagen-functions" title="Direct link to heading">#</a></h2><p>When we unit test our code, we need a way to insert records in the database to test with. We need sample records to manipulate, update, delete, etc.</p><p>We could create them by using Pop to create in the DB directly. However, our records have a lot of interdependencies and constraints. Hereâ€™s a subset of the constraints youâ€™d have to understand, and handle, to create a payment request:</p><ul><li>Payment requests must link to existent service items.</li><li>Payment requests must link to an existent MTO record.</li><li>The MTO must link to an existent Orders record.</li><li>Payment requests must use a sequence_id &gt; 0</li><li>Payment requests must have a PaymentRequestNumber
the list goes onâ€¦</li></ul><p>So to test something as simple as a function to approve a Payment Request, youâ€™d be writing a lot of test code just to create that Payment Request.</p><p>Thatâ€™s where <code>testdatagen.Make</code> functions come in handy. They efficiently <strong>create records</strong> with <strong>default values</strong>, while handling all the <strong>dependencies</strong>, and even allowing you to <strong>override default values</strong>.</p><p>It&#x27;s important to note that they create <strong>records in the db</strong> by default, so if you just want a model that doesn&#x27;t need to exist in the db, use the <a href="#stubbing-objects">stub feature</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="how-to-use-a-testdatagen-function"></a>How to use a testdatagen function<a class="hash-link" href="#how-to-use-a-testdatagen-function" title="Direct link to heading">#</a></h2><p>To use a testdatagen function, you import the testdatagen package from <code>github.com/transcom/mymove/pkg/testdatagen</code> and use the Make functions.</p><p>Let&#x27;s assume we&#x27;re creating an MTOShipment.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="defaults-provided"></a>Defaults provided<a class="hash-link" href="#defaults-provided" title="Direct link to heading">#</a></h3><p>The testdatagen function should provide defaults for value in the record, so you don&#x27;t need to provide these. The following should create an MTOShipment in the db and return a model with the data.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">mtoShipment </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> testdatagen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MakeDefaultMTOShipment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">suite</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="assertions"></a>Assertions<a class="hash-link" href="#assertions" title="Direct link to heading">#</a></h3><p>However if you want to change a field in the record, you can provide an <code>assertion</code> to do so.
An assertion says, create the default record, but overwrite this field.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">mtoShipment </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> testdatagen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MakeMTOShipment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">suite</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  testdatagen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Assertions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    MTOShipment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MTOShipment</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      CustomerRemarks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> swag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my special remarks&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>What this says is: create a default MTOShipment but overwrite the <code>CustomerRemarks</code> field.</p><p><strong>CAVEAT</strong>: Overriding does not work for <code>false</code> boolean values. If some attribute is <code>true</code> by default, setting it to <code>false</code> via Assertions won&#x27;t work. This is a <a href="https://github.com/imdario/mergo/issues/165" target="_blank" rel="noopener noreferrer">known issue in the mergo</a> package we use for merging the structs. To work around this, you can either just avoid making the default value <code>true</code> in the base function.</p><p>Or you can use a helper function like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">func setDependentsAuthorized(assertionDependentsAuthorized *bool) *bool {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    dependentsAuthorized := swag.Bool(true)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    if assertionDependentsAuthorized != nil {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    dependentsAuthorized = assertionDependentsAuthorized</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return dependentsAuthorized</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">entitlement := models.Entitlement{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    DependentsAuthorized:  setDependentsAuthorized(assertions.Entitlement.DependentsAuthorized),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="dependent-objects"></a>Dependent objects<a class="hash-link" href="#dependent-objects" title="Direct link to heading">#</a></h3><p>In addition to creating the record you requested, the <code>MTOShipment</code>, the Make function will also create every nested record it needs, by calling those objects&#x27; Make functions.</p><p>Pretty awesome not to have to create all of these records!</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">MakeMTOShipment</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ MakeMove</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â”œâ”€â”€ MakeOrder</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚Â  â”œâ”€â”€ MakeExtendedServiceMember</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚Â  â”œâ”€â”€ MakeDocument</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚Â  â””â”€â”€ MakeUserUpload</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚Â Â  â””â”€â”€ MakeContractor</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ MakeAddress</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>So what if you want to overwrite fields in those nested objects? You can, in fact, pass in assertions for those records.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="assertions-on-dependent-records"></a>Assertions on dependent records<a class="hash-link" href="#assertions-on-dependent-records" title="Direct link to heading">#</a></h3><p>Dependent records are things like <code>Move</code>, that <code>MTOShipment</code> nests in its model.</p><p>But the assertions work differently. You want to <strong>flatten</strong> the assertions, so that in the <code>testdatagen.Assertions</code> object, they are all at the top level.</p><p>Notice inside the assertions, that <code>MTOShipment</code> and <code>Move</code> are at the same level.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">mtoShipment </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> testdatagen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MakeMTOShipment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">suite</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  testdatagen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Assertions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    MTOShipment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MTOShipment</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      CustomerRemarks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> swag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my special remarks&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Move</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Move</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      ReferenceID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1234567&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This ensures that when the nested Make functions get called, they can find all your assertions and apply them correctly.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="reusing-objects"></a>Reusing objects<a class="hash-link" href="#reusing-objects" title="Direct link to heading">#</a></h3><p>In the above examples, the Make functions are always creating new records with a new uuid, so a new <code>MTOShipment</code>, <code>Move</code>, <code>Order</code> etc. At times, you may want to provide an record you have already created.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">mto </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> testdatagen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MakeAvailableMove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">suite</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">mtoShipment1 </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> testdatagen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MakeMTOShipment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">suite</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  testdatagen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Assertions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Move</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mto</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This will connect that shipment to the previously created MTO.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="stubbing-objects"></a>Stubbing objects<a class="hash-link" href="#stubbing-objects" title="Direct link to heading">#</a></h2><p>In many cases, you should not need to use the DB to test logic. To keep using the handy testdatagen functions but without saving them to the DB, you can pass in the top-level <code>Stub: true</code> assertion, like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">officeUser </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> testdatagen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MakeTOOOfficeUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">suite</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> testdatagen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Assertions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Stub</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For more details, read about [[How to write fast tests]].</p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/transcom/mymove-docs/edit/main/docs/backend/testing/understanding-testdatagen-functions.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/mymove-docs/docs/backend/testing/testing-payment-requests-for-domestic-sit-service-items"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Testing payment requests</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/mymove-docs/docs/backend/guides/service-objects"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Backend Service Objects Development Guide Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-we-use-testdatagen-functions" class="table-of-contents__link">Why we use testdatagen functions</a></li><li><a href="#how-to-use-a-testdatagen-function" class="table-of-contents__link">How to use a testdatagen function</a><ul><li><a href="#defaults-provided" class="table-of-contents__link">Defaults provided</a></li><li><a href="#assertions" class="table-of-contents__link">Assertions</a></li><li><a href="#dependent-objects" class="table-of-contents__link">Dependent objects</a></li><li><a href="#assertions-on-dependent-records" class="table-of-contents__link">Assertions on dependent records</a></li><li><a href="#reusing-objects" class="table-of-contents__link">Reusing objects</a></li></ul></li><li><a href="#stubbing-objects" class="table-of-contents__link">Stubbing objects</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/tutorial">Docusaurus Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contributing</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/frontend">Frontend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/backend">Backend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/api">API</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/tools">Tools</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/transcom/mymove-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>MilMove Documentation GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>MilMove GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://6130eb5cde15830007fdf57b--docusaurus-2.netlify.app/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Docusaurus Official Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright 2022  U.S. Federal Government (in countries where recognized) and TrussWorks. Built with Docusaurus.</div></div></div></footer></div>
<script src="/mymove-docs/assets/js/runtime~main.5c2be16a.js"></script>
<script src="/mymove-docs/assets/js/main.914b6b55.js"></script>
</body>
</html>