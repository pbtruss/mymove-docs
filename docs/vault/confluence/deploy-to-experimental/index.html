<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">How to Deploy to Experimental or Demo | MilMove Developer Portal</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://transcom.github.io/mymove-docs/docs/vault/confluence/deploy-to-experimental"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="How to Deploy to Experimental or Demo | MilMove Developer Portal"><meta data-react-helmet="true" name="description" content="Experimental is the MilMove environment that can be used to test out a code change in a branch in a safe way. This is especially good if you&#x27;d like Product, Design, or the client to test out the change before you merge the code in. It&#x27;s also a good decision to use experimental to test out particularly risky changes like changes to containers, app startup, connection to data stores, secure migrations and data loads."><meta data-react-helmet="true" property="og:description" content="Experimental is the MilMove environment that can be used to test out a code change in a branch in a safe way. This is especially good if you&#x27;d like Product, Design, or the client to test out the change before you merge the code in. It&#x27;s also a good decision to use experimental to test out particularly risky changes like changes to containers, app startup, connection to data stores, secure migrations and data loads."><link data-react-helmet="true" rel="shortcut icon" href="/mymove-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://transcom.github.io/mymove-docs/docs/vault/confluence/deploy-to-experimental"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/vault/confluence/deploy-to-experimental" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/vault/confluence/deploy-to-experimental" hreflang="x-default"><link rel="stylesheet" href="/mymove-docs/assets/css/styles.2fa8fb56.css">
<link rel="preload" href="/mymove-docs/assets/js/runtime~main.5fc1a20c.js" as="script">
<link rel="preload" href="/mymove-docs/assets/js/main.17697dd1.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mymove-docs/"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">MilMove.dev</b></a><a class="navbar__item navbar__link" href="/mymove-docs/docs/about/">About</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">APIs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/mymove-docs/api/prime">Prime</a></li><li><a class="dropdown__link" href="/mymove-docs/api/support">Support</a></li></ul></div><a class="navbar__item navbar__link" href="/mymove-docs/docs/help/">Help</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>mymove<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/mymove-docs/docs/vault/">Documentation Vault</a></li><li class="menu__list-item"><a class="menu__link" href="/mymove-docs/docs/vault/[deprecated]-run-loki-tests-against-storybook">[deprecated]-run-loki-tests-against-storybook</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">confluence</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Dependency-Update-Process-With-Dependabot">What is Dependabot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Deployment-Process">Deployment-Process</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Disabled-or-Hidden-Moves">Disabled-or-Hidden-Moves</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Setting-up-Internet-Explorer-11---Edge-Browser-in-Virtualbox">Setting-up-Internet-Explorer-11---Edge-Browser-in-Virtualbox</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/automatically-add-jira-id-to-commit-message">How to Automatically add JIRA ID to Commit Message</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/create-or-deactivate-users">How To Create or Deactivate Users</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mymove-docs/docs/vault/confluence/deploy-to-experimental">How to Deploy to Experimental or Demo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/metrics">MilMove Application Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/pairing">Pairing Sessions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">infra</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>How to Deploy to Experimental or Demo</h1></header><p>Experimental is the MilMove environment that can be used to test out a code change in a branch in a safe way. This is especially good if you&#x27;d like Product, Design, or the client to test out the change before you merge the code in. It&#x27;s also a good decision to use experimental to test out particularly risky changes like changes to containers, app startup, connection to data stores, secure migrations and data loads.</p><p>Demo is the MilMove environment that can be used for things like MilMobbing, user testing, acceptance testing or other activities that are expected to keep the environment in a particular state for some length of time. </p><p>Read more about our <a href="/mymove-docs/docs/vault/confluence/Deployment-Process">deployed environments here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="how-to-do-it"></a>How to do it<a class="hash-link" href="#how-to-do-it" title="Direct link to heading">#</a></h2><p>To deploy to experimental or demo, you&#x27;ll need to trigger the CircleCI workflow to include the deploy to steps specific to the environment.</p><p>Edit <a href="https://github.com/transcom/mymove/blob/master/.circleci/config.yml" target="_blank" rel="noopener noreferrer">the config file</a> by replacing all instances of <code>placeholder_branch_name</code> with your branch name. Pay particular attention to the job name for the environment you are deploying to, <code>exp</code> vs <code>demo</code>. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">deploy_demo_tasks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  requires:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    - deploy_demo_migrations</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  filters:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    branches:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      only: placeholder_branch_name</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>vs</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">deploy_demo_tasks:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  requires:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    - deploy_exp_migrations</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  filters:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    branches:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      only: placeholder_branch_name</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You&#x27;ll also want to update any of the lines which refer to tests, which have comments like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"># if testing on experimental or demo, you can disable these tests by using your branch name here</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  filters:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    branches:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      ignore: placeholder_branch_name</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The workflow for experimental and demo is as follows:</p><ul><li><p>Announce deploys to experimental in the <code>#experimental-env</code> slack channel or demo  in the <code>#demo-env</code> channel at least 20 minutes before you intend to deploy. </p></li><li><p>Try to get a 👍 from someone who is commonly using the environment. </p></li><li><p>If no one comments in that time-frame, feel free to deploy. Only one person can use the given environment at the same time. Any new deploys will overwrite what is currently in that environment.</p></li><li><p>When you push up to GitHub and open a PR, it&#x27;ll trigger the CircleCI workflow to start immediately. You can view its progress on <a href="https://circleci.com/gh/transcom/workflows/mymove" target="_blank" rel="noopener noreferrer">CircleCI&#x27;s UI</a> and clicking on your branch.</p><p>If it has succeeded, then it should be available immediately on the appropriate environment link:</p><ul><li><a href="https://my.exp.move.mil/" target="_blank" rel="noopener noreferrer">Customer (Service Member) experimental</a></li><li><a href="https://office.exp.move.mil/" target="_blank" rel="noopener noreferrer">Office experimental</a></li><li><a href="https://my.demo.dp3.us/" target="_blank" rel="noopener noreferrer">Customer demo</a></li><li><a href="https://office.demo.dp3.us/" target="_blank" rel="noopener noreferrer">Office demo</a></li></ul><p>You should also be able to check the health to verify that your branch/commit is properly deployed:</p><ul><li><a href="https://my.exp.move.mil/health" target="_blank" rel="noopener noreferrer">Experimental health</a></li><li><a href="https://my.demo.dp3.us/health" target="_blank" rel="noopener noreferrer">Demo health</a></li></ul></li><li><p>Once you are done, announce that you are releasing the environment in the <code>#experimental-env</code> slack channel. </p></li><li><p>Don&#x27;t forget to <a href="#dont-forget-to-clean-up-your-branch-before-a-merge">clean up</a> before you merge your branch.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="ive-got-a-server-side-feature-flag"></a>I&#x27;ve got a server-side feature flag<a class="hash-link" href="#ive-got-a-server-side-feature-flag" title="Direct link to heading">#</a></h2><p>You&#x27;ll need to add it to the environment config file <a href="https://github.com/transcom/mymove/blob/master/config/env/exp.app.env" target="_blank" rel="noopener noreferrer">experimental config file</a> or <a href="https://github.com/transcom/mymove/blob/master/config/env/demo.app.env" target="_blank" rel="noopener noreferrer">demo config file</a>. In <a href="https://github.com/transcom/mymove/blob/master/config/app.container-definition.json" target="_blank" rel="noopener noreferrer">the container config file</a> you&#x27;ll need to add it by using mustache syntax.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="i-have-a-pr-that-must-be-reviewed-in-experimental-before-it-can-be-approved"></a>I have a PR that must be reviewed in experimental before it can be approved<a class="hash-link" href="#i-have-a-pr-that-must-be-reviewed-in-experimental-before-it-can-be-approved" title="Direct link to heading">#</a></h2><p>If you have a PR that must be tested in experimental to confirm that it is functioning as intended, you may leave the commit that enables the experimental deployment for the reviewers. This will allow reviewers to click &quot;Re-Run&quot; on the CircleCI flow to redeploy experimental whenever they are ready to test your PR.</p><p>However, each reviewer <strong>MUST</strong> follow the same conventions before re-running the workflow:</p><ul><li>Check in the #experimental-env channel that no one else is currently using the experimental environment.</li><li>Post in #experimental-env declaring your intent to claim the environment, giving folks time to speak up if they are still using it.</li><li>Post an update in this channel once you are done testing that the environment is once again available for others to use.</li></ul><p>Once the reviewers are done testing, make sure to revert the environment commit as mentioned in <a href="#Dont-forget-to-clean-up-your-branch-before-a-merge">Don&#x27;t forget to clean up your branch</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="dont-forget-to-clean-up-your-branch-before-a-merge"></a>Don&#x27;t forget to clean up your branch before a merge<a class="hash-link" href="#dont-forget-to-clean-up-your-branch-before-a-merge" title="Direct link to heading">#</a></h2><p>All of the <a href="#How-to-do-it">how to do it instructions</a> need to be reverted so all future branches don&#x27;t get deployed to experimental or demo. Also, be sure to announce in <code>#experimental-env</code> that the environment is available for someone else to use!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="deploy-a-secure-migration-to-experimental-or-demo"></a>Deploy a Secure Migration to Experimental or Demo<a class="hash-link" href="#deploy-a-secure-migration-to-experimental-or-demo" title="Direct link to heading">#</a></h2><p>Follow the instructions <a href="https://github.com/transcom/mymove/wiki/migrate-the-database#secure-migrations-for-one-environment" target="_blank" rel="noopener noreferrer">here</a> to deploy a secure migration to a single environment (either demo, experimental, prod, staging).</p><p><strong>WARNING:</strong> If you run a migration in experimental/demo and either change it before merging or decide not to merge it at all, the Infrasec team will need to restore the environment&#x27;s database from the snapshot taken before the migration was applied. Otherwise, there could be DB changes in the environment that don’t match what’s in master or dev/stg/prd. Keep this in mind when testing migrations, and make sure to communicate with the folks in #g-database and #prac-infrasec in order to avoid unexpected complications/errors with future experimental/demo deployments.</p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/transcom/mymove-docs/edit/main/docs/vault/confluence/deploy-to-experimental.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/mymove-docs/docs/vault/confluence/create-or-deactivate-users"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« How To Create or Deactivate Users</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/mymove-docs/docs/vault/confluence/metrics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">MilMove Application Metrics »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-do-it" class="table-of-contents__link">How to do it</a></li><li><a href="#ive-got-a-server-side-feature-flag" class="table-of-contents__link">I&#39;ve got a server-side feature flag</a></li><li><a href="#i-have-a-pr-that-must-be-reviewed-in-experimental-before-it-can-be-approved" class="table-of-contents__link">I have a PR that must be reviewed in experimental before it can be approved</a></li><li><a href="#dont-forget-to-clean-up-your-branch-before-a-merge" class="table-of-contents__link">Don&#39;t forget to clean up your branch before a merge</a></li><li><a href="#deploy-a-secure-migration-to-experimental-or-demo" class="table-of-contents__link">Deploy a Secure Migration to Experimental or Demo</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/help">Help</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/vault">Vault</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/tutorial">Docusaurus Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contributing</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/frontend">Frontend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/backend">Backend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/database">Database</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/testing">Testing</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/transcom/mymove-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Docusaurus Official Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 United States Transportation Command. Built with Docusaurus.</div></div></div></footer></div>
<script src="/mymove-docs/assets/js/runtime~main.5fc1a20c.js"></script>
<script src="/mymove-docs/assets/js/main.17697dd1.js"></script>
</body>
</html>