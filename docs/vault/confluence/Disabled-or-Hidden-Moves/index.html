<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">Disabled-or-Hidden-Moves | MilMove Developer Portal</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://transcom.github.io/mymove-docs//mymove-docs/docs/vault/confluence/Disabled-or-Hidden-Moves"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Disabled-or-Hidden-Moves | MilMove Developer Portal"><meta data-react-helmet="true" name="description" content="Overview"><meta data-react-helmet="true" property="og:description" content="Overview"><link data-react-helmet="true" rel="shortcut icon" href="/mymove-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://transcom.github.io/mymove-docs//mymove-docs/docs/vault/confluence/Disabled-or-Hidden-Moves"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs//mymove-docs/docs/vault/confluence/Disabled-or-Hidden-Moves" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs//mymove-docs/docs/vault/confluence/Disabled-or-Hidden-Moves" hreflang="x-default"><link rel="stylesheet" href="/mymove-docs/assets/css/styles.d6ed9481.css">
<link rel="preload" href="/mymove-docs/assets/js/runtime~main.049d25e9.js" as="script">
<link rel="preload" href="/mymove-docs/assets/js/main.2f3bd36f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mymove-docs/"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">MilMove.dev</b></a><a class="navbar__item navbar__link" href="/mymove-docs/docs/about/">About</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">APIs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/mymove-docs/api/prime">Prime</a></li><li><a class="dropdown__link" href="/mymove-docs/api/support">Support</a></li></ul></div><a class="navbar__item navbar__link" href="/mymove-docs/docs/help/">Help</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>mymove<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/mymove-docs/docs/vault/">Documentation Vault</a></li><li class="menu__list-item"><a class="menu__link" href="/mymove-docs/docs/vault/[deprecated]-run-loki-tests-against-storybook">[deprecated]-run-loki-tests-against-storybook</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">confluence</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Dependency-Update-Process-With-Dependabot">What is Dependabot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Deployment-Process">Deployment-Process</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mymove-docs/docs/vault/confluence/Disabled-or-Hidden-Moves">Disabled-or-Hidden-Moves</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/How-to-Run-Load-Testing-in-Experimental">How-to-Run-Load-Testing-in-Experimental</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Load-Testing">Principles of Load Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Performance-Testing-fetchMTOUpdates">Performance Testing `fetchMTOUpdates` Query</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Setting-up-Internet-Explorer-11---Edge-Browser-in-Virtualbox">Setting-up-Internet-Explorer-11---Edge-Browser-in-Virtualbox</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/automatically-add-jira-id-to-commit-message">How to Automatically add JIRA ID to Commit Message</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/create-or-deactivate-users">How To Create or Deactivate Users</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/deploy-to-experimental">How to Deploy to Experimental or Demo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/metrics">MilMove Application Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/pairing">Pairing Sessions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">infra</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Disabled-or-Hidden-Moves</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>Office users can mark moves as &quot;cancelled&quot; and stop their progress through MilMove, and these moves need to stay visible to the TXO, the customer, and potentially even the Prime (if they were cancelled after being approved and sent). Costs may have been accrued and decisions that must be documented were likely made before this move was cancelled. </p><p>In contrast, there are also situations where the preferable course of action is to completely hide the move from all users and operate as if it never existed, such as:</p><ul><li>when there is suspected malicious activity and a move was erroneously created,</li><li>when a move was created in a testing environment without using the USTC-approved fake names and addresses,</li><li>when bad data is entered into a move that fatally breaks parts of the system, or</li><li>when fake moves are added from external processes, such as load testing or hackathon events.</li></ul><p>To allow for this functionality, we add the boolean <code>show</code> field to the <code>moves</code> table. If this field&#x27;s value is <code>true</code>, then the move is considered valid and active within MilMove. If this value is set to <code>false</code>, it is considered disabled or deactivated and is hidden from all views in the app. There are only two parts of the app that can ever be used to work with hidden/disabled moves: the <strong>Support API</strong> and the <strong>Admin Interface</strong>.</p><p><strong>No other part of the app should EVER be able to interact with or view disabled moves.</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="support-api"></a>Support API<a class="hash-link" href="#support-api" title="Direct link to heading">#</a></h2><p>This API can only be used while testing the app - it will never be functional in the production environment. All of its endpoints can be used to view and modify hidden moves. Currently, the only way to actually mark moves as hidden or disabled is the <code>hideNonFakeMoveTaskOrders</code> enpoint, which will automatically identify any moves using non-USTC-approved fake data and hide them from view. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="admin-interface"></a>Admin Interface<a class="hash-link" href="#admin-interface" title="Direct link to heading">#</a></h2><p>The Admin Interface is intended to be used by MilMove admins (currently only Truss engineers) to manage user creation/authorization, revoke sessions, and disable or reenable specific moves. This interface will be available in production. To hide/show a field:</p><ul><li>Log into the the Admin Interface:<ul><li><a href="https://admin.exp.move.mil" target="_blank" rel="noopener noreferrer">Experimental</a></li><li><a href="https://admin.stg.move.mil" target="_blank" rel="noopener noreferrer">Staging</a></li></ul></li><li>Navigate to the &quot;<a href="https://admin.exp.move.mil/system/moves" target="_blank" rel="noopener noreferrer">Moves</a>&quot; tab on the left nav panel. </li><li>If you are looking for a specific move, you may enter its locator code in the input box at the top of the list to find it. </li><li>Once you find the move you want to hide or show, click on its row in the output table (note: NOT the checkbox). This will take you to the Move Details page. </li><li>Use the details to verify that you have the correct move. Once you&#x27;re confident this is the move you want to update, click the &quot;Edit&quot; button in the top right. </li><li>Go to the dropdown for the &quot;Show&quot; field and select either &quot;Yes&quot; or &quot;No.&quot;</li><li>Click the &quot;Save&quot; button at the bottom of the page.</li><li>Test that your changes went through by attempting to locate this move in another part of the app. If you set the &quot;Show&quot; field to &quot;No,&quot; you should see a Not Found error whenever you attempt to view it. </li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="the-rest-of-milmove"></a>The Rest of MilMove<a class="hash-link" href="#the-rest-of-milmove" title="Direct link to heading">#</a></h2><p>As stated above, <strong>no other part of the MilMove app should be able to see hidden moves</strong>. While we are undergoing active development on the system, this means that every developer is responsible for ensuring that their endpoints and interfaces cannot be used to access hidden moves. Every endpoint needs to validate that the move&#x27;s <code>show</code> field is set to <code>true</code>, even if that endpoint looks at a shipment, service item, or another child object of the move.</p><p>The Prime API must validate that every move and child object has also been marked as &quot;available to Prime&quot; (indicated by the <code>available_to_prime_at</code> column on the move). This part of the app has been able to conveniently bundle these audits together, making it a relatively painless process to verify that no hidden moves are accessible.</p><p>The Internal and GHC APIs do not have this convenience, and other strategies must be developed to ensure they securely hide all deactivated moves. <strong>This is an active concern that all teams should prioritize resolving.</strong></p><p>One possible solution is to take advantage of POP&#x27;s (our backend ORM) <code>ScopeFunc</code> feature: <a href="https://github.com/gobuffalo/pop/blob/d30b82d843cd997d3ae847267fb68069329fdaec/scopes.go" target="_blank" rel="noopener noreferrer">https://github.com/gobuffalo/pop/blob/d30b82d843cd997d3ae847267fb68069329fdaec/scopes.go</a></p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/transcom/mymove-docs/edit/main/docs/vault/confluence/Disabled-or-Hidden-Moves.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/mymove-docs/docs/vault/confluence/Deployment-Process"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Deployment-Process</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/mymove-docs/docs/vault/confluence/How-to-Run-Load-Testing-in-Experimental"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How-to-Run-Load-Testing-in-Experimental Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#support-api" class="table-of-contents__link">Support API</a></li><li><a href="#admin-interface" class="table-of-contents__link">Admin Interface</a></li><li><a href="#the-rest-of-milmove" class="table-of-contents__link">The Rest of MilMove</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/help">Help</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/vault">Vault</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contributing</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/frontend">Frontend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/backend">Backend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/database">Database</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/testing">Testing</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/transcom/mymove-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 United States Transportation Command. Built with Docusaurus.</div></div></div></footer></div>
<script src="/mymove-docs/assets/js/runtime~main.049d25e9.js"></script>
<script src="/mymove-docs/assets/js/main.2f3bd36f.js"></script>
</body>
</html>