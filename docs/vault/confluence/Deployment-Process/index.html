<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">Deployment-Process | MilMove Developer Portal</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://transcom.github.io/mymove-docs//mymove-docs/docs/vault/confluence/Deployment-Process"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Deployment-Process | MilMove Developer Portal"><meta data-react-helmet="true" name="description" content="Deployment is the process of taking the local environment that the developer has on their machine and getting it up on production."><meta data-react-helmet="true" property="og:description" content="Deployment is the process of taking the local environment that the developer has on their machine and getting it up on production."><link data-react-helmet="true" rel="shortcut icon" href="/mymove-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://transcom.github.io/mymove-docs//mymove-docs/docs/vault/confluence/Deployment-Process"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs//mymove-docs/docs/vault/confluence/Deployment-Process" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs//mymove-docs/docs/vault/confluence/Deployment-Process" hreflang="x-default"><link rel="stylesheet" href="/mymove-docs/assets/css/styles.e9cb1a24.css">
<link rel="preload" href="/mymove-docs/assets/js/runtime~main.6137c858.js" as="script">
<link rel="preload" href="/mymove-docs/assets/js/main.8ef640ee.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mymove-docs/"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">MilMove.dev</b></a><a class="navbar__item navbar__link" href="/mymove-docs/docs/about/">About</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">APIs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/mymove-docs/api/prime">Prime</a></li><li><a class="dropdown__link" href="/mymove-docs/api/support">Support</a></li></ul></div><a class="navbar__item navbar__link" href="/mymove-docs/docs/help/">Help</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>mymove<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/mymove-docs/docs/vault/">Documentation Vault</a></li><li class="menu__list-item"><a class="menu__link" href="/mymove-docs/docs/vault/[deprecated]-run-loki-tests-against-storybook">[deprecated]-run-loki-tests-against-storybook</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">confluence</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Dependency-Update-Process-With-Dependabot">What is Dependabot</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mymove-docs/docs/vault/confluence/Deployment-Process">Deployment-Process</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Disabled-or-Hidden-Moves">Disabled-or-Hidden-Moves</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/How-to-Run-Load-Testing-in-Experimental">How-to-Run-Load-Testing-in-Experimental</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Load-Testing">Principles of Load Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Performance-Testing-fetchMTOUpdates">Performance Testing `fetchMTOUpdates` Query</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/Setting-up-Internet-Explorer-11---Edge-Browser-in-Virtualbox">Setting-up-Internet-Explorer-11---Edge-Browser-in-Virtualbox</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/automatically-add-jira-id-to-commit-message">How to Automatically add JIRA ID to Commit Message</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/create-or-deactivate-users">How To Create or Deactivate Users</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/deploy-to-experimental">How to Deploy to Experimental or Demo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/metrics">MilMove Application Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/vault/confluence/pairing">Pairing Sessions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">infra</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Deployment-Process</h1></header><p>Deployment is the process of taking the local environment that the developer has on their machine and getting it up on production.</p><p>Since we donâ€™t ever want to deploy a version of the codebase that is broken to production, we have a number of checks and balances along the way, as well as test environments.</p><p>The environments are :</p><ul><li>Devlocal - The environment on the developer&#x27;s computer</li><li>Staging - A shared test environment in the cloud</li><li>Experimental - A &quot;private&quot; test environment in the cloud</li><li>Demo - A &quot;private&quot; test/demo environment in the cloud</li><li>Production - The live production environment in the cloud</li></ul><p><img src="/mymove-docs/assets/images/environments-fcbe7463a77d9dc61d41539ba641c62a.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="local-development"></a>Local Development<a class="hash-link" href="#local-development" title="Direct link to heading">#</a></h2><p>The work starts on the developer, Devâ€™s, computer. They have a version of the app, server and database that&#x27;s local. They develop and test the feature locally and also create unit tests. We call this environment <code>devlocal</code>.</p><p>Typically, the postgres database is running in a docker container on the desktop. The server and apps are running on the machine and connect to the db as needed.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="merge-to-master"></a>Merge to Master<a class="hash-link" href="#merge-to-master" title="Direct link to heading">#</a></h2><p>Dev pushes the code up to github using the pull-request process to request the team to review the code. The team reviews the change and provides feedback. Dev can update the PR with fixes as needed.</p><p>At the same time, <a href="https://circleci.com/docs/2.0/about-circleci/" target="_blank" rel="noopener noreferrer">CircleCI</a> runs a set of tests against the new codebase. CircleCI is a continuous integration tool that automates test and deployment.</p><p>This set of tests will include any new tests that Dev has written. Circle keeps github updated with the status of the tests. Dev will wait until they have approval from a teammate and all checks pass on Circle.</p><p>The full set of tests are defined in</p><p><img src="/mymove-docs/assets/images/github-circle-checks-028a985273cb16968accf206269cfa54.png"></p><p>Once Dev has obtained approval for the change, and the tests run successfully on CircleCI, they can merge their feature to the <code>master</code> branch.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="deploy-to-staging"></a>Deploy to Staging<a class="hash-link" href="#deploy-to-staging" title="Direct link to heading">#</a></h2><p>CircleCI will automatically deploy the new <code>master</code> version of the code to staging. The staging environment is a live environment located in GovCloud. The domain is <code>*.stg.move.mil</code></p><p>The apps are located at</p><ul><li><code>my.stg.move.mil</code></li><li><code>office.stg.move.mil</code></li><li><code>admin.stg.move.mil</code></li></ul><p>CircleCI will run a whole slew of tests again before it deploys to staging.</p><p>See the <a href="https://app.circleci.com/pipelines/github/transcom/mymove" target="_blank" rel="noopener noreferrer"><strong>full CircleCI pipelines running here</strong></a>.</p><p>Hereâ€™s what that pipeline looks like, super simplified. There are many more jobs than are depicted here. Circle will pause at the stage called <code>approve_prd_deploy</code>.</p><p><img src="/mymove-docs/assets/images/circleci-workflow-816fb6f19d3e06993abd4fd29a5e7cc8.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="how-is-staging-different-than-devlocal"></a>How is Staging different than Devlocal<a class="hash-link" href="#how-is-staging-different-than-devlocal" title="Direct link to heading">#</a></h3><p>It&#x27;s important to understand how staging is different than devlocal.</p><ul><li><p>Staging is available online and runs in AWS Govcloud, more closely mimicking the production environment. Anyone can access the page my.stg.move.mil for e.g. although they may not be able to log in to office.stg.move.mil.</p></li><li><p>Once this version of the codebase is on staging, other Milmove teams will see the new feature. If there are new bugs introduced, other teams may come across them.</p></li><li><p>Note that only the codebase is deployed, not the contents of the database. So the database may contain different data than what Dev tested with locally. However, the schema will be the same as the migrations are applied to the staging database.</p></li><li><p>We have limited visibility into the database, we canâ€™t simply pull up a database app to view or make changes. All changes must happen through the server.</p></li><li><p>The logs on devlocal are visible in your terminal. The logs on staging are visible on <a href="https://github.com/transcom/mymove/wiki/How-to-Search-AWS-Cloudwatch-Logs-using-Instance-ID" target="_blank" rel="noopener noreferrer">Cloudwatch in AWS</a>.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="deploy-to-production"></a>Deploy to production<a class="hash-link" href="#deploy-to-production" title="Direct link to heading">#</a></h2><p>Twice a day, an engineer on Milmove will deploy the staged version to production. The production environment is also located in AWS Govcloud, at <code>*.move.mil</code>.</p><p>The apps are located at</p><ul><li><code>my.move.mil</code></li><li><code>office.move.mil</code></li><li><code>admin.move.mil</code></li></ul><p>This deployment responsibility is assigned to one team at a time and changes teams periodically.</p><p>The deploying engineer typically does the following:</p><ul><li>Checks that both the customer and office site are working on staging</li><li>Find the latest commit that has passed all tests on CircleCI</li><li>Approves the deployment</li></ul><p>Read more about this process in the <a href="https://docs.google.com/document/d/1mXHdYCdVEqqYNhSJ0_76ylJEFGErFGty8FbFaRAiyhQ" target="_blank" rel="noopener noreferrer">Deployment Playbook</a>.</p><p>This version of the codebase is then deployed to production, and the engineer checks that the production site is up and running.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="how-is-production-different-than-staging"></a>How is Production different than Staging<a class="hash-link" href="#how-is-production-different-than-staging" title="Direct link to heading">#</a></h3><p>Staging is quite similar to Production, which is why it&#x27;s such a useful test environment. But there are some differences.</p><ul><li><p>Production is used by actual service members or customers. Not all features may be available to them, but this is a production site.</p></li><li><p>There are certain APIs that are disabled on production. The support API is an example of an API that is not available in production, only in staging.</p></li><li><p>Because this is the live production environment, the database will contain actual PII and itâ€™s worthwhile to realize that it should never be downloaded or exposed in any insecure way. Like staging however, we have no direct access to the database.</p></li><li><p>The logs on production are visible on Cloudwatch in <a href="https://github.com/transcom/mymove/wiki/How-to-Search-AWS-Cloudwatch-Logs-using-Instance-ID" target="_blank" rel="noopener noreferrer">Cloudwatch in AWS</a>.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="deploy-to-experimental"></a>Deploy to Experimental<a class="hash-link" href="#deploy-to-experimental" title="Direct link to heading">#</a></h2><p>Deploying to experimental is not an everyday part of the process but is used to test changes that could break staging for other teams. Since we share the staging environment to test, a risky change could break the site and block other team members from completing their own testing.</p><p>In that case, we use experimental which any engineer can request to use, and can expect that they&#x27;ll be the only ones using this environment during the course of their testing.</p><p>Read more about <a href="https://github.com/transcom/mymove/wiki/deploy-to-experimental" target="_blank" rel="noopener noreferrer">deploying to experimental here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="deploy-to-demo"></a>Deploy to Demo<a class="hash-link" href="#deploy-to-demo" title="Direct link to heading">#</a></h2><p>Deploying to demo is not an everyday part of the process but is used to create an environment for testing over longer periods of time (days/week vs hours). Because of the nature of some of the current demo/testing events, this environment is available for things such as MilMob and user testing.</p><p>Any engineer can request to use this environment, and can expect that they&#x27;ll be the only ones using this environment during the course of their testing.</p><p>Read more about <a href="https://github.com/transcom/mymove/wiki/deploy-to-experimental" target="_blank" rel="noopener noreferrer">deploying to demo here</a>.</p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/transcom/mymove-docs/edit/main/docs/vault/confluence/Deployment-Process.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/mymove-docs/docs/vault/confluence/Dependency-Update-Process-With-Dependabot"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« What is Dependabot</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/mymove-docs/docs/vault/confluence/Disabled-or-Hidden-Moves"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Disabled-or-Hidden-Moves Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#local-development" class="table-of-contents__link">Local Development</a></li><li><a href="#merge-to-master" class="table-of-contents__link">Merge to Master</a></li><li><a href="#deploy-to-staging" class="table-of-contents__link">Deploy to Staging</a><ul><li><a href="#how-is-staging-different-than-devlocal" class="table-of-contents__link">How is Staging different than Devlocal</a></li></ul></li><li><a href="#deploy-to-production" class="table-of-contents__link">Deploy to production</a><ul><li><a href="#how-is-production-different-than-staging" class="table-of-contents__link">How is Production different than Staging</a></li></ul></li><li><a href="#deploy-to-experimental" class="table-of-contents__link">Deploy to Experimental</a></li><li><a href="#deploy-to-demo" class="table-of-contents__link">Deploy to Demo</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/help">Help</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/vault">Vault</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contributing</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/frontend">Frontend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/backend">Backend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/database">Database</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/testing">Testing</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/transcom/mymove-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 United States Transportation Command. Built with Docusaurus.</div></div></div></footer></div>
<script src="/mymove-docs/assets/js/runtime~main.6137c858.js"></script>
<script src="/mymove-docs/assets/js/main.8ef640ee.js"></script>
</body>
</html>