<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">Interacting-with-the-DB-in-Go-server-tests | MilMove Developer Portal</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://transcom.github.io/mymove-docs/docs/dev/testing/test-data/Interacting-with-the-DB-in-Go-server-tests"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Interacting-with-the-DB-in-Go-server-tests | MilMove Developer Portal"><meta data-react-helmet="true" name="description" content="Background"><meta data-react-helmet="true" property="og:description" content="Background"><link data-react-helmet="true" rel="shortcut icon" href="/mymove-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://transcom.github.io/mymove-docs/docs/dev/testing/test-data/Interacting-with-the-DB-in-Go-server-tests"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/dev/testing/test-data/Interacting-with-the-DB-in-Go-server-tests" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/dev/testing/test-data/Interacting-with-the-DB-in-Go-server-tests" hreflang="x-default"><link rel="stylesheet" href="/mymove-docs/assets/css/styles.2fa8fb56.css">
<link rel="preload" href="/mymove-docs/assets/js/runtime~main.a1733f49.js" as="script">
<link rel="preload" href="/mymove-docs/assets/js/main.85d83866.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mymove-docs/"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">MilMove.dev</b></a><a class="navbar__item navbar__link" href="/mymove-docs/docs/about/">About</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/frontend">Frontend</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/api">API</a><a class="navbar__item navbar__link navbar__link--active" href="/mymove-docs/docs/">Docs</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/help/">Help</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>mymove<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/mymove-docs/docs/">MilMove Developer Docs</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Contributing</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Testing</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/dev/testing/">Testing</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Running tests</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Writing tests</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Test data</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mymove-docs/docs/dev/testing/test-data/Interacting-with-the-DB-in-Go-server-tests">Interacting-with-the-DB-in-Go-server-tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/dev/testing/test-data/Test-Data-Generation">Test Data Generation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/dev/testing/test-data/Understanding-Testdatagen-Functions">Understanding-Testdatagen-Functions</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tools</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Versioning</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Demo</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Interacting-with-the-DB-in-Go-server-tests</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="background"></a>Background<a class="hash-link" href="#background" title="Direct link to heading">#</a></h2><p>The <code>mymove</code> repo uses the DB in some particular ways that might be surprising to folks who are new to Golang. Here are some things to be aware of that might trip you up if you have a background in Rails, RSpec, and ActiveRecord.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="cleaning-the-db-in-between-tests"></a>Cleaning the DB in between tests<a class="hash-link" href="#cleaning-the-db-in-between-tests" title="Direct link to heading">#</a></h3><p>When writing tests that interact with the database, we want to start with a clean slate at the beginning of each test so that data from one test doesn&#x27;t affect data in another test. Ideally, every test would be run inside a transaction, and the DB would automatically roll back to a clean state. This is how RSpec and Rails system tests work, as an example of industry best practices. The way MilMove is currently configured, we have to truncate the DB manually, which is one of the reasons our server tests are slow.</p><p>In order to allow tests from multiple packages to run in parallel (which is one way to speed up the tests), we have to create a separate copy of the DB for each package. This happens in <a href="https://github.com/transcom/mymove/blob/master/pkg/testingsuite/pop_suite.go" target="_blank" rel="noopener noreferrer">pop_suite.go</a> and was introduced in <a href="https://github.com/transcom/mymove/pull/1776" target="_blank" rel="noopener noreferrer">this PR</a>. In order to take advantage of this, a package must define test setup functions in a separate file that defines the test suite <code>type</code>, and that other tests in the same package can use. For example, the test setup for the <code>move</code> service in <code>pkg/services/move</code> is in <code>pkg/services/move/move_services_test.go</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">package move</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import (</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;testing&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;github.com/stretchr/testify/suite&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;go.uber.org/zap&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;github.com/transcom/mymove/pkg/testingsuite&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type MoveServiceSuite struct {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    testingsuite.PopTestSuite</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    logger Logger</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">func TestMoveServiceSuite(t *testing.T) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ts := &amp;MoveServiceSuite{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        PopTestSuite: testingsuite.NewPopTestSuite(testingsuite.CurrentPackage()), </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    logger:       zap.NewNop(), // Use a no-op logger during testing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    suite.Run(t, ts)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ts.PopTestSuite.TearDown()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Other tests within this package will then use the <code>MoveServiceSuite</code> type, such as in <code>pkg/services/move/move_list_fetcher_test.go</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">func (suite *MoveServiceSuite) TestFetchMoveList() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note that with this config, the DB will <strong>not</strong> get truncated in between tests, which can lead to confusion, and wasted time debugging. In this case, <code>move_list_fetcher_test.go</code> is the only test in this package, and it only has one function, so the lack of truncation isn&#x27;t a problem. For now. Save yourself the trouble, and add a <code>SetupTest</code> function to truncate the DB in between tests. Most tests already have this function, but if you&#x27;re adding a new service, you&#x27;ll need to add it:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">func (suite *MoveServiceSuite) SetupTest() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    err := suite.TruncateAll()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    suite.FatalNoError(err)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Another very important note is that the DB will only be truncated in between functions in tests. It will <strong>not</strong> be truncated in between subtests within the same function. Coming from RSpec, this was surprising to me and has tripped me up several times. Here is an example of subtests that begin with <code>suite.T().Run</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">func (suite *MoveOrderServiceSuite) TestListMoves() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Create a Move without a shipment to test that only Orders with shipments</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // are displayed to the TOO</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    testdatagen.MakeDefaultMove(suite.DB())</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    expectedMove := testdatagen.MakeHHGMoveWithShipment(suite.DB(), testdatagen.Assertions{})</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    officeUser := testdatagen.MakeDefaultOfficeUser(suite.DB())</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    moveOrderFetcher := NewMoveOrderFetcher(suite.DB())</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    suite.T().Run(&quot;returns moves&quot;, func(t *testing.T) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      moves, _, err := moveOrderFetcher.ListMoveOrders(officeUser.ID, &amp;services.ListMoveOrderParams{PerPage: swag.Int64(1), Page: swag.Int64(1)})</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      suite.FatalNoError(err)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      suite.Len(moves, 1)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    suite.T().Run(&quot;returns moves filtered by GBLOC&quot;, func(t *testing.T) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      // This move is outside of the office user&#x27;s GBLOC, and should not be returned</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      testdatagen.MakeHHGMoveWithShipment(suite.DB(), testdatagen.Assertions{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        TransportationOffice: models.TransportationOffice{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          Gbloc: &quot;AGFM&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      })</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      moves, _, err := moveOrderFetcher.ListMoveOrders(officeUser.ID, &amp;services.ListMoveOrderParams{PerPage: swag.Int64(1), Page: swag.Int64(1)})</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      suite.FatalNoError(err)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      suite.Equal(1, len(moves))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In the test above, the second subtest keeps in mind that the data from the previous subtest still exists in the DB, and adjusts the expected payload length accordingly. Subtests allow for more expressive test descriptions, so their use is encouraged, but if there are more than 2 subtests that depend on the DB, it&#x27;s best to avoid confusion and clear the DB manually by calling <code>suite.TruncateAll()</code> at the beginning of each subtest after the first one.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="testing-associations-on-models"></a>Testing associations on models<a class="hash-link" href="#testing-associations-on-models" title="Direct link to heading">#</a></h3><p>If you&#x27;re writing an integration test that verifies that a model was created, and you also want to check attributes on associations, you have to load the associations manually. Pop, unlike ActiveRecord, does not automatically load associations.</p><p>For example, let&#x27;s say we want to verify that service items were created in the DB, and then iterate through them to make sure the <code>Code</code> in the <code>ReService</code> association was properly created. If we do it like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">var expectedReServiceCodes []models.ReServiceCode</span></span><span class="token-line" style="color:#393A34"><span class="token plain">expectedReServiceCodes = append(expectedReServiceCodes,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  models.ReServiceCodeDLH,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  models.ReServiceCodeFSC,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  models.ReServiceCodeDOP,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  models.ReServiceCodeDDP,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  models.ReServiceCodeDPK,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  models.ReServiceCodeDUPK,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">err = suite.DB().Where(&quot;mto_shipment_id = ?&quot;, shipmentForAutoApprove.ID).All(&amp;serviceItems)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">for i := range serviceItems {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   suite.Equal(expectedReServiceCodes[i], serviceItems[i].ReService.Code)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>the test will fail by saying that the actual Code is an empty string, which is misleading because it makes it sound like it was able to fetch the associated ReService.</p><p>The solution is to load the association first. There are two ways to do this:</p><p>Using <code>Eager</code> or <code>EagerPreload</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">err = suite.DB().EagerPreload(&quot;ReService&quot;).Where(&quot;mto_shipment_id = ?&quot;, shipmentForAutoApprove.ID).All(&amp;serviceItems)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or by using Pop&#x27;s <code>Load</code> function. You can either Load them all:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">err = suite.DB().Where(&quot;mto_shipment_id = ?&quot;, shipmentForAutoApprove.ID).All(&amp;serviceItems)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">suite.DB().Load(&amp;serviceItems)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or just the one(s) you want:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">err = suite.DB().Where(&quot;mto_shipment_id = ?&quot;, shipmentForAutoApprove.ID).All(&amp;serviceItems)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">suite.DB().Load(&amp;serviceItems, &quot;ReService&quot;)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/transcom/mymove-docs/edit/main/docs/dev/testing/test-data/Interacting-with-the-DB-in-Go-server-tests.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/mymove-docs/docs/dev/testing/writing-tests/generate-mocks-with-mockery"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« How To Generate Mocks with Mockery</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/mymove-docs/docs/dev/testing/test-data/Test-Data-Generation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Test Data Generation Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link">Background</a><ul><li><a href="#cleaning-the-db-in-between-tests" class="table-of-contents__link">Cleaning the DB in between tests</a></li><li><a href="#testing-associations-on-models" class="table-of-contents__link">Testing associations on models</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/help">Help</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/vault">Vault</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/tutorial">Docusaurus Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contributing</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/frontend">Frontend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/backend">Backend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/database">Database</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/testing">Testing</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/transcom/mymove-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Docusaurus Official Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 United States Transportation Command. Built with Docusaurus.</div></div></div></footer></div>
<script src="/mymove-docs/assets/js/runtime~main.a1733f49.js"></script>
<script src="/mymove-docs/assets/js/main.85d83866.js"></script>
</body>
</html>