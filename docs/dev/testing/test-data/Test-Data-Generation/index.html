<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">Test Data Generation | MilMove Developer Portal</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://transcom.github.io/mymove-docs/docs/dev/testing/test-data/Test-Data-Generation"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Test Data Generation | MilMove Developer Portal"><meta data-react-helmet="true" name="description" content="When working with or testing our system, it can be helpful to have sample data in the system that gives you good starting points for different steps in the process and/or seeing different features in action."><meta data-react-helmet="true" property="og:description" content="When working with or testing our system, it can be helpful to have sample data in the system that gives you good starting points for different steps in the process and/or seeing different features in action."><link data-react-helmet="true" rel="shortcut icon" href="/mymove-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://transcom.github.io/mymove-docs/docs/dev/testing/test-data/Test-Data-Generation"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/dev/testing/test-data/Test-Data-Generation" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/dev/testing/test-data/Test-Data-Generation" hreflang="x-default"><link rel="stylesheet" href="/mymove-docs/assets/css/styles.2fa8fb56.css">
<link rel="preload" href="/mymove-docs/assets/js/runtime~main.30b48e55.js" as="script">
<link rel="preload" href="/mymove-docs/assets/js/main.b3ed7c5f.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mymove-docs/"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">MilMove.dev</b></a><a class="navbar__item navbar__link" href="/mymove-docs/docs/about/">About</a><a class="navbar__item navbar__link navbar__link--active" href="/mymove-docs/docs/">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">APIs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/mymove-docs/api/prime">Prime</a></li><li><a class="dropdown__link" href="/mymove-docs/api/support">Support</a></li></ul></div><a class="navbar__item navbar__link" href="/mymove-docs/docs/help/">Help</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>mymove<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/mymove-docs/docs/">MilMove Developer Docs</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Getting Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/dev/getting-started/Designers-guide-to-setting-up-app-locally">Designers&#x27;s guide to setting up app locally</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/dev/getting-started/How-to-Test-the-Prime-API">How to Test the Prime API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/dev/getting-started/How-to-view-a-move-or-payment-request-in-the-office-app-as-a-TOO-or-TIO">How to view a move or payment request in the office app as a TOO or TIO</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Contributing</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Testing</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/dev/testing/">Testing</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Running tests</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Writing tests</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Test data</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/dev/testing/test-data/Interacting-with-the-DB-in-Go-server-tests">Interacting-with-the-DB-in-Go-server-tests</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mymove-docs/docs/dev/testing/test-data/Test-Data-Generation">Test Data Generation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/dev/testing/test-data/Understanding-Testdatagen-Functions">Understanding-Testdatagen-Functions</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tools</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Versioning</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Demo</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Test Data Generation</h1></header><p>When working with or testing our system, it can be helpful to have sample data in the system that gives you good starting points for different steps in the process and/or seeing different features in action.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="scenarios-and-usage"></a>Scenarios and Usage<a class="hash-link" href="#scenarios-and-usage" title="Direct link to heading">#</a></h2><p>We have data set up for various scenarios and use cases. You can find them in <code>pkg/testdatagen/scenario</code>.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Primary use cases</h5></div><div class="admonition-content"><ul><li><code>devseed</code> - Used to populate the local <code>dev</code> database and for the databases used in <strong>Ephemeral</strong> environments.</li><li><code>e2ebasic</code> - Used by our e2e tests, either by Circle CI, or when you run those tests locally (depending on how you run them).</li></ul></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="usage"></a>Usage<a class="hash-link" href="#usage" title="Direct link to heading">#</a></h3><p>To generate the test data, you can use either <code>make</code> targets that are set up to use specific sets of data, or you can use the <code>generate-test-data</code> command.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="make-targets"></a>Make targets<a class="hash-link" href="#make-targets" title="Direct link to heading">#</a></h4><p>We have several <code>make</code> targets that will set up data for you. For example <code>make db_dev_fresh</code> will start up your <code>dev</code> db, clear out any existing data, and populate it with the data defined in the <code>devseed.go</code> file. You can also use <code>make db_dev_e2e_populate</code> which is similar, but it expects the <code>dev</code> db to already be running, and it doesn&#x27;t recreate the database from scratch, which can make it faster if you have already set up your db previously and don&#x27;t want to start from the beginning.</p><p>You can also use <code>make db_e2e_up</code> (or any <code>make</code> targets that use the <code>db_e2e_up</code> target), which instead of using the <code>dev</code> db and <code>devseed.go</code>, will instead populate the <code>test</code> with the data defined in <code>e2ebasic.go</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="generate-test-data-command"></a>generate-test-data command<a class="hash-link" href="#generate-test-data-command" title="Direct link to heading">#</a></h4><p>We also have a command that can be used to customize which scenario is used and which database is populated. This is actually what is used by the <code>make</code> targets described above.</p><p>To use it:</p><ol><li>Run <code>make bin/generate-test-data</code><ul><li>This will build the fake data generator binary.</li></ul></li><li>Run <code>DB_PORT=5433 bin/generate-test-data</code> with the options you want:<ul><li><code>--named-scenario=</code> is used to define which scenario you want to use, e.g. <code>--named-scenario=&quot;dev_seed&quot;</code> or <code>--named-scenario=&quot;e2e_basic&quot;</code><ul><li>Note that the names here are slightly different from the file names. You can find the name of the scenario that you need by opening the file in <code>pkg/testdatagen/scenario</code> that you&#x27;re interested and looking near the top for something similar to this: <code>var DevSeedScenario = devSeedScenario{&quot;dev_seed&quot;}</code> but with all the var names being different since they&#x27;re defined based on the scenario they&#x27;re for.</li></ul></li><li><code>--named-sub-scenario</code> is an optional param used to define which sub-scenario you want to use in the specified named scenario. E.g. <code>--named-scenario=&quot;dev_seed&quot; --named-sub-scenario=&quot;shipment_hhg_cancelled&quot;</code></li><li><code>--db-env=</code> is used to define the environment you want to use for the database, e.g. <code>--db-env=&quot;development&quot;</code> or <code>--db-env=&quot;test&quot;</code></li></ul></li></ol><p>So a sample command might look like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">DB_PORT=5433 bin/generate-test-data --named-scenario=e2e_basic --db-env=&quot;test&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor anchor__h5 anchorWithStickyNavbar_31ik" id="numbered-scenarios"></a>Numbered Scenarios<a class="hash-link" href="#numbered-scenarios" title="Direct link to heading">#</a></h5><p>Some of the scenarios are numbered, so if you want to run one of those, you&#x27;ll need to add another argument to your <code>generate-test-data</code> call, <code>--scenario=</code>, where the value is a number. We technically have the following numbered scenarios:</p><ul><li>--scenario=1 for Award Queue Scenario 1</li><li>--scenario=2 for Award Queue Scenario 2</li><li>--scenario=3 for Duty Station Scenario</li><li>--scenario=4 for PPM or PPM SIT Estimate Scenario (can also use Rate Engine Scenarios for Estimates)</li><li>--scenario=5 for Rate Engine Scenario 1</li><li>--scenario=6 for Rate Engine Scenario 2</li><li>--scenario=7 for TSP test data</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor anchor__h5 anchorWithStickyNavbar_31ik" id="sub-scenarios-devseed-only-optional"></a>Sub-scenarios (devseed only, optional)<a class="hash-link" href="#sub-scenarios-devseed-only-optional" title="Direct link to heading">#</a></h5><p>A sub-scenario using the <code>--named-sub-scenario</code> option is a recent addition to the <code>generate-test-data</code> script. It&#x27;s mainly used to run a very specific sub-scenario within a named scenario. If a sub-scenario is not specified, then the entire named scenario will run which includes the sub-scenario.</p><p>Currently available sub-scenarios for each main named scenarios:</p><ul><li><code>dev_seed</code><ul><li><code>additional_ppm_users</code>: creates additional ppm users for testing</li><li><code>diverted_shipments</code>: creates shipments that are diverted</li><li><code>hhg_onboarding</code>: creates hhg shipments for TOO/TIO onboarding</li><li><code>hhg_services_counseling</code>: creates hhg shipments for Services Counseling</li><li><code>payment_request_calculations</code>: creates payment requests under move code <code>PARAMS</code> to show calculations for the TIO</li><li><code>ppm_and_hhg</code>: creates a combo ppm and hhg shipments</li><li><code>ppm_office_queue</code>: creates moves for the ppm office queue</li><li><code>shipment_hhg_cancelled</code>: creates an hhg shipment that is in the cancelled state.</li><li><code>txo_queues</code>: creates moves for the TXO queues</li><li><code>misc</code>: creates misc seed data (see sub-scenario for more info)</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="data-generation"></a>Data Generation<a class="hash-link" href="#data-generation" title="Direct link to heading">#</a></h3><p>The scenarios use our <code>testdatagen</code> functions to quickly wire up the data they need. You can find more info on using <code>testdatagen</code> functions here: <a href="https://github.com/transcom/mymove/wiki/Understanding-Testdatagen-Functions" target="_blank" rel="noopener noreferrer">https://github.com/transcom/mymove/wiki/Understanding-Testdatagen-Functions</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="updating-scenarios"></a>Updating Scenarios<a class="hash-link" href="#updating-scenarios" title="Direct link to heading">#</a></h2><p>If you want to add more data to a given scenario, or tweak it, you can edit the file of the scenario you want as needed.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="adding-a-new-case-e2ebasic-and-bandwidth-only"></a>Adding a New Case (e2ebasic and bandwidth only)<a class="hash-link" href="#adding-a-new-case-e2ebasic-and-bandwidth-only" title="Direct link to heading">#</a></h3><p>If you are adding a new case, e.g. an un-submitted move with an HHG shipment that has multiple destination addresses, you would add a function to the file like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createUnsubmittedHHGMoveMultipleDestinations</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">db </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pop</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Connection</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/*</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    A service member with an un-submitted move that has an HHG shipment going to multiple destination addresses</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    email </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hhg-multple-destinations@unsubmitted&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uuidStr </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;f08146cf-4d6b-43d5-9ca5-c8d239d37b3e&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    loginGovUUID </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> uuid</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Must</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uuid</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewV4</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    testdatagen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MakeUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> testdatagen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Assertions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        User</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">User</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">            uuid</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Must</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uuid</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uuidStr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            LoginGovUUID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">loginGovUUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            LoginGovEmail</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Active</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">        </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// rest of logic for creating the move/shipment as needed</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note that we use a combo of hard-coded UUIDs (e.g. <code>&quot;f08146cf-4d6b-43d5-9ca5-c8d239d37b3e&quot;</code>) and generated UUIDs (<code>uuid.Must(uuid.NewV4())</code>). We have the hard-coded ones where it is helpful to have an ID we can easily look up. It also makes it nice so that when you refresh the database, you can still use those same IDs (e.g. reloading some pages will work and give you the fresh data).</p><p>Then down in the <code>Run</code> function, you`d add a call to your new function wherever seems appropriate. In our example, this would probably go well with the other onboarding data e.g.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Run does that data load thing</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e devSeedScenario</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">db </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pop</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Connection</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> userUploader </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">uploader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">UserUploader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> primeUploader </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">uploader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrimeUploader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> routePlanner route</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Planner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> logger Logger</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// other creation logic</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Onboarding</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">createUnsubmittedHHGMove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">createUnsubmittedHHGMoveMultipleDestinations</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">createUnsubmittedMoveWithNTSAndNTSR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">createServiceMemberWithOrdersButNoMoveType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">createServiceMemberWithNoUploadedOrders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// other creation logic.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now you should be able to run the commands to populate the database and see your data.</p><p>An important thing to note is that the email you use in your user creation (SMs and office users), is the email used to display on the local log in page, so the better your email, the easier it is to use:
<img alt="screenshot of local login emails" src="/mymove-docs/assets/images/local_login_emails-e622881bec62c00d1c78e152913638aa.png"></p><p>In the screenshot above, our new service member can be seen quickly and easily. If you notice though, the last email in that screenshot is <code>first.last@login.gov.test (milmove)</code>. That&#x27;s what happens when you don&#x27;t specify the email, which makes it harder to know what that service member (or office user if in the office side) is set up with. This also happens when we accidentally use the <code>testdatagen</code> functions incorrectly and they generate extra users that we don&#x27;t actually want.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="adding-a-sub-scenario-devseed-only"></a>Adding a Sub-Scenario (devseed only)<a class="hash-link" href="#adding-a-sub-scenario-devseed-only" title="Direct link to heading">#</a></h3><p>To add in a new sub-scenario:</p><ol><li>Create a sub-scenario function in the <code>subscenarios.go</code> file:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">myNewSubScenario</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// notice that we&#x27;re returning a function here</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// this is to create a closure function so we can use the params passed in for later in the sub-scenario list</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// code that seeds data</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ol start="2"><li>Add new sub-scenario function to the list in the <code>Setup()</code> function located in <code>devseed.go</code>:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Setup initializes the setup data for devseed</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// this is where the sub-scenarios are set up and stored</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">devSeedScenario</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">db </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pop</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Connection</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> userUploader </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">uploader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">UserUploader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> primeUploader </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">uploader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrimeUploader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> logger Logger</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// add the name of your sub-scenario as the key</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// add the sub-scenario function as the value</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SubScenarios </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;my_new_sub_scenario&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">myNewSubScenario</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>That&#x27;s it! The new sub-scenario is added to the list and can now be used by running:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">generate-test-data --named-scenario</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;dev_seed&quot;</span><span class="token plain"> --named-sub-scenario</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;my_new_sub_scenario&quot;</span><span class="token plain"> --db-env</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;development&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or by running the make cmd:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">DEVSEED_SUBSCENARIO</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mySubScenario </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> db_dev_e2e_populate</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="troubleshooting"></a>Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="my-changes-are-not-there-when-running-generate-test-data-what-do-i-do"></a>My changes are not there when running <code>generate-test-data</code>. What do I do?<a class="hash-link" href="#my-changes-are-not-there-when-running-generate-test-data-what-do-i-do" title="Direct link to heading">#</a></h3><p>This is most likely because the binary file is not updated. You can regenerate the binary by running these commands in the project directory:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> bin/generate-test-data </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> bin/generate-test-data</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or using the go cmd directly:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">go run github.com/transcom/mymove/cmd/generate-test-data --named-scenario</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;dev_seed&quot;</span><span class="token plain"> --db-env</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;development&quot;</span><span class="token plain"> --named-sub-scenario</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;mySubScenario&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="resources"></a>Resources<a class="hash-link" href="#resources" title="Direct link to heading">#</a></h2><ul><li><a href="https://github.com/transcom/mymove#dev-db-commands" target="_blank" rel="noopener noreferrer"><code>Dev</code> DB commands</a></li><li><a href="https://github.com/transcom/mymove#test-db-commands" target="_blank" rel="noopener noreferrer"><code>Test</code> DB commands</a></li><li><a href="https://github.com/transcom/mymove/wiki/run-e2e-tests" target="_blank" rel="noopener noreferrer">Running e2e tests</a></li><li><a href="https://github.com/transcom/mymove/wiki/Understanding-Testdatagen-Functions" target="_blank" rel="noopener noreferrer">Testdatagen functions</a></li></ul></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/transcom/mymove-docs/edit/main/docs/dev/testing/test-data/Test-Data-Generation.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/mymove-docs/docs/dev/testing/test-data/Interacting-with-the-DB-in-Go-server-tests"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Interacting-with-the-DB-in-Go-server-tests</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/mymove-docs/docs/dev/testing/test-data/Understanding-Testdatagen-Functions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Understanding-Testdatagen-Functions Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#scenarios-and-usage" class="table-of-contents__link">Scenarios and Usage</a><ul><li><a href="#usage" class="table-of-contents__link">Usage</a></li><li><a href="#data-generation" class="table-of-contents__link">Data Generation</a></li></ul></li><li><a href="#updating-scenarios" class="table-of-contents__link">Updating Scenarios</a><ul><li><a href="#adding-a-new-case-e2ebasic-and-bandwidth-only" class="table-of-contents__link">Adding a New Case (e2ebasic and bandwidth only)</a></li><li><a href="#adding-a-sub-scenario-devseed-only" class="table-of-contents__link">Adding a Sub-Scenario (devseed only)</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link">Troubleshooting</a><ul><li><a href="#my-changes-are-not-there-when-running-generate-test-data-what-do-i-do" class="table-of-contents__link">My changes are not there when running <code>generate-test-data</code>. What do I do?</a></li></ul></li><li><a href="#resources" class="table-of-contents__link">Resources</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/help">Help</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/vault">Vault</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/tutorial">Docusaurus Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contributing</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/frontend">Frontend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/backend">Backend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/contributing/database">Database</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/dev/testing">Testing</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/transcom/mymove-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Docusaurus Official Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 United States Transportation Command. Built with Docusaurus.</div></div></div></footer></div>
<script src="/mymove-docs/assets/js/runtime~main.30b48e55.js"></script>
<script src="/mymove-docs/assets/js/main.b3ed7c5f.js"></script>
</body>
</html>