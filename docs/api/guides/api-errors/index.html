<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">API Errors | MilMove Developer Portal</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://transcom.github.io/mymove-docs/docs/api/guides/api-errors"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="API Errors | MilMove Developer Portal"><meta data-react-helmet="true" name="description" content="Well formatted errors are an important component of education to the user of the API and should be given as much care as the API design."><meta data-react-helmet="true" property="og:description" content="Well formatted errors are an important component of education to the user of the API and should be given as much care as the API design."><link data-react-helmet="true" rel="shortcut icon" href="/mymove-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://transcom.github.io/mymove-docs/docs/api/guides/api-errors"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/api/guides/api-errors" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/api/guides/api-errors" hreflang="x-default"><link rel="stylesheet" href="/mymove-docs/assets/css/styles.2fa8fb56.css">
<link rel="preload" href="/mymove-docs/assets/js/runtime~main.e07d1742.js" as="script">
<link rel="preload" href="/mymove-docs/assets/js/main.8b649ace.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mymove-docs/"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">MilMove Documentation</b></a><a class="navbar__item navbar__link" href="/mymove-docs/docs/about/">About</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/frontend">Frontend</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/backend">Backend</a><a class="navbar__item navbar__link navbar__link--active" href="/mymove-docs/docs/api">API</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/tools">Tools</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/">Docs</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/help/index">Help</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>mymove<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/mymove-docs/docs/api">MilMove API</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Swagger Documentation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Docs</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/api/guides/api-programming-guide">API Programming Guide</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mymove-docs/docs/api/guides/api-errors">API Errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/api/guides/api-style-guide">API Style Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/api/guides/guide-to-creating-an-endpoint">Creating an Endpoint</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/api/guides/how-to-deprecate-endpoints">How to Deprecate an API Endpoint</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Testing</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>API Errors</h1></header><p>Well formatted errors are an important component of education to the user of the API and should be given as much care as the API design. </p><p>Just like an HTML error page shows a useful error message to a visitor, an API should provide a <strong>useful error message</strong> in a known consumable format. </p><p>The API should always return sensible HTTP status codes.  API errors typically break down into 2 types: <code>4xx</code> series status codes for client issues &amp; <code>5xx</code> series status codes for server issues. All <code>4xx</code> series errors generated by Milmove handlers should provide a consumable JSON error representation. <code>5xx</code> errors served by the Milmove code should also abide by this requirement. However some <code>5xx</code> errors are generated by the router and upstream mechanisms and those may not abide by this requirement. </p><p>The JSON error body should provide a few things for the developer - a useful error <strong>title</strong>, possibly a further detailed <strong>description</strong>, and an <strong>instance</strong> identifier that makes it possible to refer to this particular occurrence of the problem. </p><p>The instance identifier enables the Milmove team to <a href="/mymove-docs/docs/api/guides/How-to-Search-AWS-Cloudwatch-Logs-using-Instance-ID.md">look up Cloudwatch logs</a> that were written when the problem occurred. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="default-error"></a>Default Error<a class="hash-link" href="#default-error" title="Direct link to heading">#</a></h2><p>The default JSON output representation for the error messages looks like: </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{   </span></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;title&quot;: &quot;Conflict Error&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;detail&quot;: &quot;Estimated weight must be set before this item can be approved.&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;instance&quot;: &quot;7673868d-231e-490d-9c4f-19288e7e668d&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="custom-error"></a>Custom Error<a class="hash-link" href="#custom-error" title="Direct link to heading">#</a></h2><p>In addition to this default format, specific errors can choose to provide a custom representation that builds on this. A swagger example of how to define these errors is provided in this article on <a href="/mymove-docs/docs/api/guides/handle-backend-errors.md#defining-error-models-in-swagger">backend errors</a>.</p><p>Validation errors for PUT, PATCH and POST requests need a field breakdown, and will return an <code>UnprocessableEntity</code> response. The top level detail can summarize or generalize the validation failures and provide the detailed errors in an additional <code>invalidFields</code> object, like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"> {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;title&quot;: &quot;Validation Error&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;detail&quot;: &quot;MoveTaskOrderID can not be blank.&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;instance&quot;: &quot;1fd81778-4c47-4998-ba03-ea94bc0ac21c&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;invalidFields&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;move_task_order_id&quot;: [</span></span><span class="token-line" style="color:#393A34"><span class="token plain">             &quot;MoveTaskOrderID can not be blank.&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">         ]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     }</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="http-status-codes"></a>HTTP status codes<a class="hash-link" href="#http-status-codes" title="Direct link to heading">#</a></h2><p>HTTP defines a bunch of <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" target="_blank" rel="noopener noreferrer">meaningful status codes</a> that can be returned from an API. Milmove will leverage these to help the API consumers route their responses accordingly. </p><p>The types of responses are grouped into the following top level categories which we would generate within Milmove handler and service code:</p><ul><li><code>2xx</code> <strong>Success</strong> - This category indicates the action requested by the client was received, understood, and accepted.</li><li><code>4xx</code> <strong>Client Error</strong> - This category indicate that the error seems to have been caused by the client. </li><li><code>5xx</code> <strong>Server Error</strong> - This category indicates the server failed to fulfill a request.</li></ul><p><strong>Importance of the Client vs. Server Error Distinction</strong> - When we have multiple <code>500</code> server errors, this results in a PagerDuty alarm that on-call folks have to resolve. It signals that something went wrong on our side <em>that shouldn&#x27;t have</em>. Keep this in mind as you select which type of error response your situation calls for.  </p><p>Below are the subset of HTTP responses we generate in the Prime API handlers and service code. </p><ul><li><code>200</code> <strong>OK</strong> - Response to a successful GET, PUT, PATCH or DELETE. Can also be used for a POST that doesn&#x27;t result in a creation.</li><li><code>201</code> <strong>Created</strong> - Response to a POST that results in a creation. </li><li><code>404</code> <strong>Not Found</strong> - When a non-existent resource is requested.</li><li><code>422</code> <strong>Unprocessable Entity</strong> - Used for validation errors.</li><li><code>409</code> <strong>Conflict</strong> - When we cannot process the request due to the current state of the server.</li><li><code>412</code> <strong>Precondition Failed</strong> - When the <a href="https://github.com/transcom/mymove/blob/master/docs/adr/0042-optimistic-locking.md" target="_blank" rel="noopener noreferrer">optimistic locking</a> precondition is violated because the provided eTag does not match the record. </li></ul><p>One special note for Bad Request errors, which is not listed above. <code>400</code> <strong>Bad Request</strong> implies that the request is malformed, such as if the body does not parse. Since the request is first parsed by swagger, swagger will return a Bad Request error if it is unable to parse. The handler never gets called unless the request was able to be correctly parsed. Therefore, we should never need to return Bad Request.</p><p>Adapted from <a href="https://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api#errors" target="_blank" rel="noopener noreferrer">Best Practices for a Pragmatic Restful API</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="handling-errors-in-the-code"></a>Handling Errors in the Code<a class="hash-link" href="#handling-errors-in-the-code" title="Direct link to heading">#</a></h2><p>In the handler functions and service objects, we create an <em>error type</em> based on events in the system. These events are handed back up to the top level handler where they are then converted into an appropriate <em>error response</em>. </p><p>An <strong>error type</strong> is one that we define, create and pass in the service level code such as <code>InvalidInputError</code>. It has no dependence on swagger generated code or a specific endpoint.</p><p>An <strong>error response</strong> is a swagger generated type that we use to send errors back to the user, with a payload we construct. It is specific to the endpoint.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">mtoshipmentops.NewCreateMTOShipmentNotFound().WithPayload(payload)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="error-types-and-error-responses"></a>Error types and Error responses<a class="hash-link" href="#error-types-and-error-responses" title="Direct link to heading">#</a></h2><p>Error types in the code are defined in <code>pkg/apperror/errors.go</code>.</p><p>Error responses are defined in the yamls, <code>swagger/prime.yaml</code> and <code>swagger/support.yaml</code></p><p>Here are the main error types and the responses we send in that case:</p><ul><li><p><code>NotFoundError</code> â†’ <code>404</code> <strong>Not Found</strong></p><p>  This error is generated when we can&#x27;t find a resource or record. It is returned to the user as <code>404</code> <strong>Not Found</strong> with a message indicating the type of object and preferably the ID of the missing record, if known.</p></li><li><p><code>InvalidInputError</code> â†’ <code>422</code> <strong>Unprocessable Entity</strong></p><p>  This error is generated when there are validation errors in the input. Swagger may also return this error as it performs pre-parsing of the request before calling the handler.</p><p>  When we generate this error, we should populate the <code>ValidationErrors</code> field in the struct with the error field and detail so that it can be return in the <code>invalidFields</code> of the JSON response. </p></li><li><p><code>ConflictError</code> â†’ <code>409</code> <strong>Conflict</strong></p><p>  This error is generated when we cannot process the request due to the current state of the server. For e.g. if the PrimeEstimatedWeight is not set on a shipment, we cannot create certain service items on that shipment. If we get a request to create such a service item, we have a conflict error.</p></li><li><p><code>PreconditionFailedError</code> â†’ <code>412</code> <strong>Precondition Failed</strong></p><p> This error is generated on a PUT or PATCH when the eTag does not match the record. It is returned to the user with a message indicating that the eTag is a mismatch.</p></li><li><p><code>QueryError</code> â†’ <code>500</code> <strong>Internal Server Error</strong></p><p> If there is nothing wrong with the request the client sent us, and we <em>still</em> get an error in the query to the DB, we may then generate a <code>QueryError</code>. At the top level, we  send a <code>500</code> <strong>Internal Server Error</strong>.</p><p> The error generated at the query level may contain more detail than we want to expose to the user of the API such as database table and column names. It&#x27;s a good idea to log these errors but we don&#x27;t want to return them to the user.</p></li></ul><p>Note: There might be new errors that we generate as the code evolves, but it&#x27;s a good idea to understand these definitions and see if your error fits one of them before defining a new one. This improves consistency and makes the errors easier to understand and process by the user. If you do define a new error, please update this guide.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="security-guidelines"></a>Security Guidelines<a class="hash-link" href="#security-guidelines" title="Direct link to heading">#</a></h2><p>In the next section we will cover converting the errors into responses. For each of the error responses, do not provide any information in the error message to help <em>debug</em> the issue. The target audience for the error responses is <strong>the client, not the developer</strong>. So we can let them know what they did wrong, but not reveal information about our own systems.</p><p>Secure logging of errors into Cloudwatch is what we use for developer information. This is accomplished in using <code>logger.Error()</code> function calls.</p><p><strong>Internal Server Error:</strong> Always use an Internal Server Error response if something broke on our side. You can set the message to <code>nil</code> and it will have a boilerplate message. The client does not need to know anything further if an Internal Server Error occurred. </p><p><strong>Trace ID:</strong> Make sure each error has a trace ID. We use the trace ID to identify the set of events that resulted in an error message. The client can report the trace ID to us, and a developer can then debug the issue that occurred using the trace id. The trace ID is meaningless to them.</p><p><strong>DB data:</strong> Sometimes an error is triggered in the DB. The message often starts with <code>pq</code>. Do not pass on this error string in the response. You may log it securely into Cloudwatch but there is no reason to pass on the contents of a DB error to the client.</p><p><strong>Filepaths:</strong> Equally there is no reason to reveal a file path to the client. Never provide this information in the error message.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="constructing-errors-and-responses"></a>Constructing Errors and Responses<a class="hash-link" href="#constructing-errors-and-responses" title="Direct link to heading">#</a></h2><p>To create an instance of an error type, you&#x27;ll call the <code>New</code> function for that error, and pass in parameters pertaining to that error.</p><p>For a validation error, details of the validation issue should be in verrs, but there is an additional message field as well.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">invalidInputError </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> services</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewInvalidInputError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    shipment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> verrs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;DestinationID was not valid&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>At the topmost handler function, usually called <code>Handle</code>, you&#x27;ll check the type of the error and construct the appropriate response. </p><p>Note that the message in the call to <code>payloads.InternalServerError</code> is often <code>nil</code>. This is because we have a default message and title that will be populated. </p><p>You can override the default message in the call if you have a more useful message, but if not, the default message is sufficient. </p><p>Here is some example code of how we take the error type and create the appropriate response, according to the <a href="https://github.com/transcom/mymove/wiki/API-Errors/#error-types-and-error-responses" target="_blank" rel="noopener noreferrer">mapping described above</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly golang"><pre tabindex="0" class="prism-code language-golang codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">if err != nil {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    logger.Error(&quot;primeapi.CreateMTOShipmentHandler&quot;, zap.Error(err))</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    switch e := err.(type) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // NotFoundError -&gt; Not Found response</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    case services.NotFoundError:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return mtoshipmentops.NewCreateMTOShipmentNotFound().</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            WithPayload(payloads.ClientError(handlers.NotFoundMessage, err.Error(), h.GetTraceID()))</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // InvalidInputError -&gt; Unprocessable Entity reponse</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    case services.InvalidInputError:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return mtoshipmentops.NewCreateMTOShipmentUnprocessableEntity().</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            WithPayload(payloads.ValidationError(handlers.ValidationErrMessage, h.GetTraceID(), e.ValidationErrors))</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // QueryError -&gt; Internal Server error</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    case services.QueryError:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if e.Unwrap() != nil {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // If you can unwrap, log the internal error (usually a pq error) for better debugging</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Note we do not expose this detail in the payload</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            logger.Error(&quot;primeapi.CreateMTOServiceItemHandler error&quot;, zap.Error(e.Unwrap()))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return mtoshipmentops.NewCreateMTOShipmentInternalServerError().</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                            WithPayload(payloads.InternalServerError(nil, h.GetTraceID()))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Unknown -&gt; Internal Server Error</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    default:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return mtoshipmentops.NewCreateMTOShipmentInternalServerError().</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            WithPayload(payloads.InternalServerError(nil, h.GetTraceID()))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/transcom/mymove-docs/edit/main/docs/api/guides/api-errors.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/mymove-docs/docs/api/guides/api-programming-guide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« API Programming Guide</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/mymove-docs/docs/api/guides/api-style-guide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Style Guide Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#default-error" class="table-of-contents__link">Default Error</a></li><li><a href="#custom-error" class="table-of-contents__link">Custom Error</a></li><li><a href="#http-status-codes" class="table-of-contents__link">HTTP status codes</a></li><li><a href="#handling-errors-in-the-code" class="table-of-contents__link">Handling Errors in the Code</a></li><li><a href="#error-types-and-error-responses" class="table-of-contents__link">Error types and Error responses</a></li><li><a href="#security-guidelines" class="table-of-contents__link">Security Guidelines</a></li><li><a href="#constructing-errors-and-responses" class="table-of-contents__link">Constructing Errors and Responses</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/tutorial">Docusaurus Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contributing</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/frontend">Frontend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/backend">Backend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/api">API</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/tools">Tools</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/transcom/mymove-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>MilMove Documentation GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>MilMove GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Docusaurus Official Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 United States Transportation Command. Built with Docusaurus.</div></div></div></footer></div>
<script src="/mymove-docs/assets/js/runtime~main.e07d1742.js"></script>
<script src="/mymove-docs/assets/js/main.8b649ace.js"></script>
</body>
</html>